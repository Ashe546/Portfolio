"use strict";(()=>{var Tn=Object.defineProperty;var r=(Z,N)=>Tn(Z,"name",{value:N,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[5998],{46699:(Z,N,d)=>{var f=d(59753),T=d(37713);(0,f.on)("click",".js-conversation-menu-button",function(){let e=!0;return async function(t){if(e===!1){const o=t.currentTarget.closest(".select-menu").querySelector("details-menu");if(!o)return;o.innerHTML="";const i=`${o.getAttribute("src")}?instrument=1`,c=await fetch(i);c.ok&&(o.innerHTML=await c.text())}e=!1}}()),(0,f.on)("click",".js-conversations-menu-item",function(e){const t=e.currentTarget,n=t.closest(".js-conversations-details");n.hasAttribute("open")&&n.removeAttribute("open"),window.location.hash=t.hash,(0,T.kc)(document)}),(0,f.on)("click",".js-resolved-conversations",async function(e){const t=e.currentTarget.querySelector(".dropdown-caret"),n=e.currentTarget.querySelector(".select-menu-header");E(t),n.classList.toggle("border-bottom-0")});function E(e){e.style.transform===""?e.style.transform="rotate(180deg)":e.style.transform=""}r(E,"flipCaret");var R=d(86404),w=d(70130),l=d(64463),p=d(96310);(0,f.on)("details:toggled-group",".js-file.js-details-container",function(e){e.target===e.currentTarget&&a(e.detail.open)}),(0,f.on)("details:toggled",".js-file.js-details-container",function(e){if(e.target!==e.currentTarget)return;const t=e.currentTarget;t.getBoundingClientRect().top<0&&(0,T.zT)(t)}),(0,w.Z)(()=>{const e=window.location.hash.slice(1);if(!e)return;const t=document.getElementsByName(e)[0];if(!t)return;const n=t.nextElementSibling;n&&n.matches(".js-file.js-details-container")&&(n.classList.add("open"),n.classList.add("Details--on"))}),(0,l.N7)(".js-file-header-dropdown",{subscribe:e=>(0,R.RB)(e,"toggle",y)});function y({currentTarget:e}){const t=e,n=t.hasAttribute("open");t.closest(".js-file-header").classList.toggle("has-open-dropdown",n)}r(y,"toggleFileHeaderMenu");function a(e){if(!document.querySelector(".js-file-filter"))return;const n=L();for(const i of n)i.checked=e;const s=A();s&&(s.checked=!e);const o=_();H(o),D(o),se(),ee(),oe(),(0,p.X)(o,M(),u(),j(),b(),q(),I(),S())}r(a,"toggledAllFileContents");function u(){return Array.from(L()).filter(t=>t.checked).map(t=>t.value)}r(u,"getSelectedFileTypes");function L(){return document.querySelectorAll(".js-diff-file-type-option")}r(L,"getFileTypeOptions");function A(){const e=document.querySelector(".js-deleted-files-toggle");if(e instanceof HTMLInputElement)return e}r(A,"getDeletedFilesInput");function _(){return k()||I()||S()||j()||q()}r(_,"fileFilterActive");function j(){return b().length>0}r(j,"codeownerFilterActive");function b(){const e=document.querySelectorAll(".js-diff-owner-option");return Array.from(e).filter(n=>n.checked).map(n=>n.value)}r(b,"getSelectedOwners");function k(){return u().length!==L().length}r(k,"fileTypeFilterActive");function q(){const e=document.querySelector(".js-manifests-option");return e?e.checked:!1}r(q,"manifestFilterActive");function I(){const e=A();return e?!e.checked:!1}r(I,"deletedFilterActive");function S(){const e=document.querySelector(".js-viewed-files-toggle");return e?!e.checked:!1}r(S,"viewedFilterActive");function M(){return new URLSearchParams(window.location.search).has("w")}r(M,"whitespaceFilterActive");function H(e){document.querySelector(".js-file-filter-text").classList.toggle("color-fg-accent",e)}r(H,"toggleHighlightActiveFilter");function D(e){const t=document.querySelector(".js-reset-filters"),n=document.querySelector(".js-commits-filtered");t!=null&&!n&&(t.hidden=!e)}r(D,"toggleResetFileFiltersButton");function ee(){const e=k(),t=document.querySelector(".js-file-filter-select-all-container"),n=e?"data-select-all-markup":"data-all-selected-markup",s=t.getAttribute(n);t.textContent=s,t.classList.toggle("color-fg-muted",!e),t.classList.toggle("color-fg-accent",e)}r(ee,"toggleSelectAll");function se(){const e=L(),t=I();for(const n of e)if(t){const s=n.getAttribute("data-non-deleted-files-count")==="0";n.disabled=s}else n.disabled=!1}r(se,"toggleAvailableOptions");function oe(){const e=document.querySelectorAll(".js-file-type-count");for(const t of e){const n=I()?"data-non-deleted-file-count-markup":"data-all-file-count-markup",s=t.getAttribute(n);s&&(t.textContent=s)}}r(oe,"toggleFileTypeCounts");function ue(){const e=document.querySelector(".js-file-filter-blankslate");if(!e)return;if(document.querySelectorAll(".js-diff-progressive-loader").length>0){e.hidden=!0;return}const n=document.querySelectorAll(".js-file");if(n.length===0){e.hidden=!0;return}const s=Array.from(n).some(o=>!o.hidden);e.hidden=s}r(ue,"checkEmptyFilterResults"),(0,f.on)("click",".js-jump-to-menu-item",function({currentTarget:e}){const t=e.getAttribute("href").substring(1),n=document.querySelector(`[data-anchor="${t}"]`);if(n){const s=n.closest(".js-file.js-details-container");s.hidden=!1}ue()});var v=d(95140),O=d(70497),W=d(69567),ne=d(82036),g=d(52660),h=d(10900),C=d(65935);const B="```suggestion",Q="```",z=new RegExp(`${B}(?:.*)
`,"i"),X=new RegExp(`${Q}(
|$)`);function K(e,t){const n=e.slice(0,t).split(`
`);return e.split(`
`)[n.length-1]}r(K,"lineAtIndex");function G(e){const n=/^(\s+)/.exec(e);return n&&n[0]||""}r(G,"leadingWhitespace");function ce(e){let t=`${B}
`;return t+=`${e}
`,t+=Q,t}r(ce,"formatSuggestion");function ge(e,t,n=0){const s=t.substring(n,t.length),o=e.exec(s);return o?o.index+n:-1}r(ge,"findNextOccurrenceOf");function Le(e,t){const n=[];let s=0,o=-1;for(;(o=ge(z,e,s))>-1;){s=o+B.length;const i=ge(X,e,s);if(i===-1)return!1;s=i+Q.length,n.push([o,i])}return n.some(i=>t>i[0]&&t<i[1])}r(Le,"cursorInSuggestionBlock");function Ct(e){const t=e.selectionStart;if(!Le(e.value,t))return!1;const n=e.value,s=K(n,t);if(s===null)return!1;const i=`
${G(s)}`,c=n.substr(0,t)+i+n.substr(t);(0,ne.Se)(e,c);const m=t+i.length;return e.setSelectionRange(m,m),!0}r(Ct,"insertNewSuggestionLine");function xt(e,t){const n=ce(e),s=t.selectionStart,o=t.value,i=ge(/\n/,o,s),c=o.trim()==="",m=K(o,s),P=m.trim()==="",F=`
${Q}`.length;let x=o,$=0;if(c)x=n,$=x.length-F;else if(i===-1)P?(x=o+n,$=x.length-F):(x=[o,n].join(`
`),$=x.length-F);else if(P){const U=G(m),Y=s-U.length,J=o.substring(0,Y),ie=o.substring(i,o.length);x=[J,n,ie].join(""),$=x.length-ie.length-F}else if(Le(o,s)){const U=ge(/```/,o,s)+3,Y=o.substring(0,U),J=o.substring(U,o.length);x=[Y,`
`,n,J].join(""),$=x.length-J.length-F}else{const U=o.substring(0,i),Y=o.substring(i,o.length);x=[U,`
`,n,Y].join(""),$=x.length-Y.length-F}(0,ne.Se)(t,x),t.focus(),t.setSelectionRange($,$)}r(xt,"insertSuggestionBlock");var $e=d(84570),xe=d(74136);const re={addToBatchEnabled:".js-add-to-batch-enabled",unchangedSuggestion:".js-unchanged-suggestion",closedOrMergedPull:".js-closed-pull",viewingSubset:".js-viewing-subset-changes",leftBlob:".js-validation-on-left-blob",rightBlob:".js-validation-on-right-blob",outdatedComment:".js-outdated-comment",resolvedThread:".js-resolved-thread",pendingReview:".js-pending-review",isMultiLine:".js-is-multiline",inMergeQueue:".js-in-merge-queue"};function qt(e){const t=e.getAttribute("data-lines");if(t!=null){const s=e.closest(".js-suggested-changes-container").querySelector(".js-comment-field");xt(t,s)}}r(qt,"renderSuggestionBlock");function We(e,t){const n=document.querySelectorAll(".js-apply-suggestion-button"),s=e.querySelector(".js-disabled-apply-suggestion-button");for(const o of n){const i=s.cloneNode(!0);pe(i,t),o.closest("details").replaceWith(i)}}r(We,"disableAllApplySuggestionButtons");function Ue(e){const t=document.querySelector(".js-batched-suggested-changes-container");t&&t.classList.add("d-none");for(const n of document.querySelectorAll(".js-apply-single-suggestion"))n.classList.remove("d-none"),n.disabled=!0,n.setAttribute("aria-label",e);for(const n of document.querySelectorAll(".js-batched-suggested-changes-add"))n.classList.remove("d-none"),n.disabled=!0,n.setAttribute("aria-label",e);for(const n of document.querySelectorAll(".js-batched-suggested-changes-remove"))n.classList.add("d-none");for(const n of document.querySelectorAll(".js-focus-commit-suggestions-form-button"))n.classList.add("d-none");for(const n of document.querySelectorAll(".js-pending-batched-suggestion-label"))n.classList.add("d-none")}r(Ue,"disableBatchSuggestionsButtons");function pe(e,t){e.setAttribute("aria-label",t),e.classList.remove("d-none")}r(pe,"displayButton");function De(e,t){const n=document.querySelector(".js-suggested-changes-inline-validation-template").cloneNode(!0);n.classList.remove("js-suggested-changes-inline-validation-template");const s=n.querySelector(".js-suggested-changes-inline-error-message");s.textContent=e.trim(),t.parentNode.insertBefore(n,t.nextSibling)}r(De,"validateOnPreview"),(0,f.on)("click",".js-suggested-change-toolbar-item",function(e){const t=e.currentTarget;t instanceof HTMLButtonElement&&t.getAttribute("aria-disabled")==="false"&&qt(t)}),(0,f.on)("click",".js-refresh-after-suggestion",xe.H5);function Ve(e){if(!document.querySelector(".js-suggested-changes-subset-files"))return;const n=e.querySelectorAll(".js-suggested-change-toolbar-item"),s=re.viewingSubset;if(!s)return;const o=document.querySelector(s).textContent.trim();for(const i of n){i.setAttribute("aria-disabled","true");const c=i.getAttribute("aria-describedby"),m=document.getElementById(c);m.textContent=o}}r(Ve,"validateInlineCommmentsContainer"),(0,l.N7)(".js-inline-comments-container",{add(e){Ve(e)}}),(0,l.N7)(".js-preview-body .js-apply-changes",{add(e){const t=e.closest(".js-suggested-changes-container");if(!t)return e.remove();const n=document.querySelector(re.rightBlob).textContent,s=document.querySelector(re.leftBlob).textContent,o=e.closest(".js-suggested-changes-blob");if(t.getAttribute("data-thread-side")!==""){if(t.getAttribute("data-thread-side")==="left")return De(s,o),e.remove()}else{const x=e.closest(".js-inline-comment-form"),$=x.querySelector('input[name="side"]');if(!x||!$)return e.remove();if(x&&$.value==="left")return De(s,o),e.remove()}const i=e.previousElementSibling,c=i.querySelector(".js-blob-code-deletion"),m=i.querySelectorAll(".js-blob-code-addition");if(!c||m.length===0)return;const P=c.textContent,F=Array.from(m).map(x=>x.textContent);if(P===F.join(`
`))return De(n,o),e.remove();e.remove()}}),(0,l.N7)(".js-comment-body .js-apply-changes",{add(e){const t=e.closest(".js-suggested-changes-container");if(!t)return e.remove();const n=t.querySelector(".js-suggested-changes-template");if(!(n instanceof HTMLTemplateElement))return e.remove();const s=n.content.cloneNode(!0),o=s.querySelector(".js-disabled-apply-suggestion-button");let i;try{i=s.querySelector(".js-batched-suggested-changes-add")}catch(V){if(V.name!=="QueryError")throw V}if(document.querySelectorAll(".js-suggested-changes-files-tab").length){const V=document.querySelector(re.addToBatchEnabled).textContent;i&&(i.removeAttribute("disabled"),i.setAttribute("aria-label",V))}const c=document.querySelector(".js-pull-header-details"),m=c&&c.getAttribute("data-pull-is-open")==="true",P=e.closest(".js-resolvable-timeline-thread-container"),F=n.getAttribute("data-comment-pending")==="true",x=n.getAttribute("data-in-merge-queue")==="true",$=t.classList.contains("js-selection-contains-deletions");if(P&&P.getAttribute("data-resolved")==="true"){const V=document.querySelector(re.resolvedThread).textContent,fe=s.querySelector("details");return fe&&fe.remove(),pe(o,V),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",V)),e.replaceWith(s)}if(!m){const V=document.querySelector(re.closedOrMergedPull).textContent;return pe(o,V),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",V)),e.replaceWith(s)}if(x){const V=document.querySelector(re.inMergeQueue);let fe="";V&&(fe=V.textContent||"");const me=s.querySelector("details");return me&&me.remove(),pe(o,fe),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",fe)),e.replaceWith(s)}if(F){const V=document.querySelector(re.pendingReview).textContent;return s.querySelector("details").remove(),pe(o,V),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",V)),e.replaceWith(s)}if($){const V=document.querySelector(re.leftBlob).textContent;return s.querySelector("details").remove(),pe(o,V),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",V)),e.replaceWith(s)}const U=document.querySelector(".js-suggested-changes-subset-files"),Y=n.getAttribute("data-outdated-comment")==="true";if(U||Y){let V;return U?V=document.querySelector(re.viewingSubset).textContent:Y&&(V=document.querySelector(re.outdatedComment).textContent),s.querySelector("details").remove(),pe(o,V),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",V)),e.replaceWith(s)}const J=s.querySelector(".js-single-suggested-change-form"),ie=e.closest(".js-suggested-changes-blob");if(ie){const V=ie.querySelectorAll(".js-blob-code-deletion"),fe=ie.querySelectorAll(".js-blob-code-addition");if(!V)return;const me=Array.from(V).map(de=>de.textContent),we=Array.from(fe).map(de=>de.textContent);if(me.length===we.length&&me.every((de,ve)=>de===we[ve])){const de=document.querySelector(re.unchangedSuggestion).textContent;s.querySelector("details").remove(),pe(o,de),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",de))}else for(const de of we){const ve=document.createElement("input");ve.setAttribute("type","hidden"),ve.setAttribute("name","value[]"),ve.value=de,J.appendChild(ve)}}e.replaceWith(s)}}),(0,l.N7)(".js-pull-header-details",{add(e){const t=e.getAttribute("data-pull-is-open")==="true",n=document.querySelector(".js-suggested-changes-template");if(t||!(n instanceof HTMLTemplateElement))return;const s=n.content,o=document.querySelector(re.closedOrMergedPull).textContent;We(s,o),Ue(o)}}),(0,l.N7)(".js-suggested-changes-subset-files",{add(){const e=document.querySelector(".js-suggested-changes-template");if(!(e instanceof HTMLTemplateElement))return;const t=e.content,n=document.querySelector(re.viewingSubset).textContent;We(t,n),Ue(n)}}),(0,f.on)("click",".js-apply-suggestion-button",async function(e){const t=e.currentTarget.parentElement;if(t){const n=t.querySelector(".js-suggestion-commit-title");setTimeout(()=>n.focus(),1)}}),(0,f.on)("click",".js-dismiss-suggested-change-onboarding-notice",async function(e){const t=e.currentTarget.getAttribute("data-url"),n=e.currentTarget.parentElement.querySelector(".js-data-url-csrf"),s=new FormData;if(s.append("notice","suggested_changes_onboarding_prompt"),(await fetch(t,{method:"POST",mode:"same-origin",body:s,headers:{"Scoped-CSRF-Token":n.value,"X-Requested-With":"XMLHttpRequest"}})).ok){const i=document.querySelectorAll(".js-suggested-change-onboarding-notice");for(const c of i)c.remove()}}),(0,$e.w4)("keypress",".js-comment-field",function(e){if(e.key==="Enter"){const t=e.target;Ct(t)&&e.preventDefault()}}),(0,$e.w4)("keypress",".js-suggestion-commit-message",function(e){const t=e.currentTarget;e.key==="Enter"&&t.setAttribute("rows","3")});function Mt(e){const n=e.closest(".js-review-state-classes").querySelectorAll("[data-pending-batched-suggestion]").length;for(const o of document.querySelectorAll(".js-pending-batched-suggested-changes-count"))o.textContent=String(n);const s=document.querySelector(".js-reenable-add-to-batch").textContent;for(const o of document.querySelectorAll("[data-batched-suggestion-reenable-sibling]"))o.removeAttribute("data-batched-suggestion-reenable-sibling"),o.removeAttribute("disabled"),o.setAttribute("aria-label",s);if(n>0){e.hidden=!1;const o=e.querySelector(".js-batched-suggested-changes-toggle");o.classList.add("anim-pulse-in"),o.addEventListener("animationend",()=>o.classList.remove("anim-pulse-in"),{once:!0});for(const i of document.querySelectorAll(".js-apply-single-suggestion"))i.classList.add("d-none");for(const i of document.querySelectorAll(".js-batched-suggested-changes-add")){const c=i.closest(".js-suggested-change-form-container");c.getAttribute("data-pending-batched-suggestion")==="true"||c.getAttribute("data-comment-pending")==="true"||c.getAttribute("data-outdated-comment")==="true"?i.classList.add("d-none"):i.classList.remove("d-none"),i.getAttribute("data-batched-suggestion-disabled-by-sibling")==="true"&&(i.removeAttribute("data-batched-suggestion-disabled-by-sibling"),i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",document.querySelector(".js-one-suggestion-per-line").textContent))}for(const i of document.querySelectorAll(".js-batched-suggested-changes-remove"))i.closest(".js-suggested-change-form-container").getAttribute("data-pending-batched-suggestion")==="true"?i.classList.remove("d-none"):i.classList.add("d-none");for(const i of document.querySelectorAll(".js-focus-commit-suggestions-form-button")){const c=i.closest(".js-suggested-change-form-container"),m=c.getAttribute("data-comment-pending")==="true",P=c.getAttribute("data-outdated-comment")==="true",F=c.getAttribute("data-resolved-comment")==="true",U=i.closest(".js-inline-comments-container").querySelector('input[name="side"]').value==="left";m||P||F||U?i.classList.add("d-none"):i.classList.remove("d-none")}for(const i of document.querySelectorAll(".js-pending-batched-suggestion-label"))i.closest(".js-suggested-change-form-container").getAttribute("data-pending-batched-suggestion")==="true"?i.classList.remove("d-none"):i.classList.add("d-none")}else{e.hidden=!0;for(const o of document.querySelectorAll(".js-apply-single-suggestion"))o.classList.remove("d-none");for(const o of document.querySelectorAll(".js-batched-suggested-changes-add"))o.classList.remove("d-none");for(const o of document.querySelectorAll(".js-batched-suggested-changes-remove"))o.classList.add("d-none");for(const o of document.querySelectorAll(".js-focus-commit-suggestions-form-button"))o.classList.add("d-none");for(const o of document.querySelectorAll(".js-pending-batched-suggestion-label"))o.classList.add("d-none")}}r(Mt,"updatePendingSuggestionsState");function ze(){const e=document.querySelector(".js-batched-suggested-changes-container");e&&setTimeout(()=>Mt(e))}r(ze,"updatePendingSuggestionsHandler"),(0,f.on)("click",".js-batched-suggested-changes-add",function(e){const t=e.target,n=t.closest(".js-suggested-change-form-container");if(n.getAttribute("data-comment-pending")==="true"||n.getAttribute("data-outdated-comment")==="true"||t.getAttribute("data-batched-suggestion-disabled-by-sibling")==="true")return;n.setAttribute("data-pending-batched-suggestion","true");const s=t.closest(".js-inline-comments-container");for(const o of s.querySelectorAll(".js-batched-suggested-changes-add"))o.setAttribute("data-batched-suggestion-disabled-by-sibling","true");t.removeAttribute("data-batched-suggestion-disabled-by-sibling"),ze()}),(0,f.on)("click",".js-batched-suggested-changes-remove",function(e){e.currentTarget.closest(".js-suggested-change-form-container").removeAttribute("data-pending-batched-suggestion");const n=e.currentTarget.closest(".js-inline-comments-container");for(const s of n.querySelectorAll(".js-batched-suggested-changes-add"))s.setAttribute("data-batched-suggestion-reenable-sibling","true");ze()}),(0,f.on)("click",".js-focus-commit-suggestions-form-button",function(e){e.preventDefault(),window.location.href="#clear-commit-suggestions",window.location.href="#commit-suggestions"}),(0,f.on)("click",".js-dismiss-batched-suggested-changes-onboarding-notice",async function(e){const t=e.currentTarget.getAttribute("data-url"),n=e.currentTarget.parentElement.querySelector(".js-data-url-csrf"),s=new FormData;if(s.append("notice","batched_suggested_changes_onboarding_prompt"),(await fetch(t,{method:"POST",mode:"same-origin",body:s,headers:{"Scoped-CSRF-Token":n.value,"X-Requested-With":"XMLHttpRequest"}})).ok)for(const i of document.querySelectorAll(".js-batched-suggested-change-onboarding-notice"))i.remove()});function Ke(e,t){const n=e.querySelector("input[name=commit_title]"),s=e.querySelector("textarea[name=commit_message]");let o=n.value.trim();o===""&&(o=n.defaultValue);const i=s.value.trim();i!==""&&(o=`${o}

${i}
`),n.disabled=!0,s.disabled=!0;const c=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name","message"),c.value=o,e.appendChild(c);const m=document.createElement("input");m.setAttribute("type","hidden"),m.setAttribute("name","changes"),m.value=JSON.stringify(t),e.appendChild(m)}r(Ke,"convertFormInputs"),(0,f.on)("click",".js-single-suggested-change-form .js-suggested-changes-submit",function(e){const n=e.currentTarget.closest(".js-single-suggested-change-form"),s=Array.from(n.querySelectorAll('input[name="value[]"]')).map(i=>i.value),o=[{commentId:n.querySelector("input[name=comment_id]").value,path:n.querySelector("input[name=path]").value,suggestion:s}];Ke(n,o)}),(0,C.AC)(".js-single-suggested-change-form",async function(e,t){const n=e.closest(".js-suggested-change-form-container"),s=e.closest("details"),o=n.querySelector(".js-suggestion-applied"),c=e.closest(".js-suggested-changes-contents").querySelector(".js-error-message-placeholder");try{await t.json(),o.classList.remove("d-none"),n.querySelector(".js-batched-suggested-changes-add").classList.add("d-none"),s.remove(),(0,xe.H5)()}catch(m){if(m.name!=="QueryError"){const P=m.response.json&&m.response.json.error,F=c.querySelector(".js-error-message");c.hidden=!1,F.textContent=P,n.prepend(c),e.closest(".js-suggested-change-form-container").querySelector(".js-batched-suggested-changes-add").classList.add("d-none"),s.remove()}}}),(0,f.on)("click",".js-suggestion-batch-submit",function(e){const t=e.currentTarget.closest(".js-batched-suggested-changes-form"),n=[];for(const s of document.querySelectorAll("[data-pending-batched-suggestion]")){const o=s.querySelector(".js-single-suggested-change-form"),i=Array.from(o.querySelectorAll('input[name="value[]"]')).map(c=>c.value);n.push({commentId:o.querySelector("input[name=comment_id]").value,path:o.querySelector("input[name=path]").value,suggestion:i})}Ke(t,n)}),(0,C.AC)(".js-batched-suggested-changes-form",async function(e,t){try{await t.json();const n=e.closest(".js-batched-suggested-changes-container");n.hidden=!0,(0,xe.H5)()}catch(n){const s=n.response.json&&n.response.json.error,i=e.closest(".js-batched-suggested-changes-container").querySelector(".js-error-message-container"),c=i.querySelector(".js-error-message");c.textContent=s,i.hidden=!1}}),(0,l.N7)(".js-files-tab-stale",{add(){const e=document.querySelector(".js-batched-suggested-changes-container");e&&setTimeout(()=>{e.hidden=!0})}});let kt=0;(0,f.on)("click",".js-add-single-line-comment",function(e){const t=e.currentTarget,n=t.closest(".file");Ge(n);const s=It(t)||Ot(t),o=Ze(s.querySelector("td"),t),i=o.querySelector(".js-inline-comment-form");i instanceof HTMLFormElement&&tt(i,t),(0,v.j)(o)});function It(e){const t=e.closest("tr"),n=Qe(t,".js-inline-comments-container");if(n instanceof Element)return n}r(It,"existingCommentRow");function Qe(e,t){const n=e.nextElementSibling;return n&&n.matches(t)?n:null}r(Qe,"next");function Ot(e){const t=e.closest("tr"),n=Re("js-inline-comments-single-container-template",e).firstElementChild;return t.after(n),n}r(Ot,"insertCommentRow");function Ze(e,t){const n=Array.from(e.querySelectorAll(".review-comment-form-container")).pop();if(n)return n.closest("div.js-line-comments");{const s=Re("js-inline-comments-single-container-template",t).querySelector("div.js-line-comments");return e.appendChild(s),s}}r(Ze,"findOrInsertCommentThread"),(0,f.on)("click",".js-add-split-line-comment",function(e){const t=e.currentTarget,n=t.closest(".file");Ge(n);const s=t.closest("tr"),o=t.getAttribute("data-type")==="addition"?"js-addition":"js-deletion",i=Ht(s),c=Pt(i,o,t),m=Ze(c,t),P=m.querySelector(".js-inline-comment-form");P instanceof HTMLFormElement&&tt(P,t),(0,v.j)(m)}),(0,C.AC)(".js-inline-comment-form",async function(e,t){_t(e);let n;try{n=await t.json()}catch(m){if(m.response){let P;try{P=m.response.json}catch{}if(P){Dt(e,P);return}}throw m}const s=n.json,o=s.inline_comment,i=e.closest(".js-line-comments");o&&i.querySelector(".js-comments-holder").append((0,h.r)(document,o));const c=s.inline_comment_thread;c&&i.replaceWith((0,h.r)(document,c)),(0,v.w)(e)});function _t(e){const t=e.querySelector(".js-comment-form-error");t&&(t.hidden=!0,t.textContent=null)}r(_t,"resetInlineCommentError");function Dt(e,t){const n=e.querySelector(".js-comment-form-error");let s;t.errors?Array.isArray(t.errors)?s=t.errors.join(", "):s=t.errors:s="There was an error posting your comment.",n.textContent=s,n.style.display="block",n.hidden=!1,n.classList.remove("d-none")}r(Dt,"handleInlineCommentError");function Rt(e){const[t,n]=e.match(/^new_inline_comment_(?:discussion|diff)_(?:[\w-]+)_(\d+)_(\d+)$/)||[];if(!t)return;const s=document.querySelector(`.js-inline-comment-form input[name='in_reply_to'][value='${n}']`);if(!s)return;const o=s.closest(".js-line-comments");o&&(0,v.j)(o)}r(Rt,"showReplyForm");function Ft(e){const[t,n]=e.match(/^new_inline_comment_diff_(?:[\w-]+)_(\d+)$/)||[];if(!t)return;const s=document.querySelector(`.js-add-line-comment[data-anchor='${t}'][data-position='${n}']`);s&&s.click()}r(Ft,"showCommentForm"),document.addEventListener("session:resume",function(e){const t=e.detail;Rt(t.targetId),Ft(t.targetId)});function Ge(e){const t=e.querySelector(".js-toggle-file-notes");t instanceof HTMLInputElement&&(0,ne.Se)(t,!0)}r(Ge,"ensureInlineNotesEnabled");function Xe(){for(const e of document.querySelectorAll(".file .js-inline-comments-container")){const n=e.querySelectorAll(".js-comments-holder > *").length>0,s=e.querySelector("[data-resolved='true']")!=null,o=e.querySelector(".js-inline-comment-form-container"),i=!!o&&o.classList.contains("open");!(n||s)&&!i&&e.remove()}}r(Xe,"cleanupInlineCommentContainers"),(0,l.N7)(".js-comment",{remove:Xe}),(0,f.on)("inlinecomment:focus",".js-inline-comment-form-container",function(e){const t=e.target.querySelector(".js-suggested-changes-container");t&&Ye(t)}),(0,l.N7)(".js-suggested-changes-container.is-comment-editing",e=>{Ye(e)});function Bt(e,t){const n=new URLSearchParams(e.search.slice(1)),s=t.elements.namedItem("in_reply_to")||t.elements.namedItem("comment_id"),o=t.querySelector("textarea");if(n.append("textarea_id",o.id),s instanceof HTMLInputElement&&s.value)return n.append("comment_id",s.value),n;const i=t.elements.namedItem("path"),c=t.elements.namedItem("start_side"),m=t.elements.namedItem("start_line"),P=t.elements.namedItem("side"),F=t.elements.namedItem("line"),x=t.elements.namedItem("start_commit_oid"),$=t.elements.namedItem("end_commit_oid"),U=t.elements.namedItem("base_commit_oid");return!(i instanceof HTMLInputElement)||!(c instanceof HTMLInputElement)||!(m instanceof HTMLInputElement)||!(P instanceof HTMLInputElement)||!(F instanceof HTMLInputElement)||!(x instanceof HTMLInputElement)||!($ instanceof HTMLInputElement)||!(U instanceof HTMLInputElement)?null:(n.append("path",i.value),n.append("start_side",c.value),n.append("start_line",m.value),n.append("end_side",P.value),n.append("end_line",F.value),n.append("start_commit_oid",x.value),n.append("end_commit_oid",$.value),n.append("base_commit_oid",U.value),n)}r(Bt,"paramsForSuggestionButton");async function Ye(e){const t=e.querySelector(".js-suggestion-button-placeholder");if(!t)return;const n=t.getAttribute("data-src-base");if(!n)return;const s=new URL(n,window.location.origin),o=t.closest(".js-inline-comment-form")||t.closest(".js-comment-update");if(!(o instanceof HTMLFormElement))return;const i=Bt(s,o);if(!i)return;s.search=i.toString();const c=await(0,g.a)(document,s.toString());t.innerHTML="",t.appendChild(c)}r(Ye,"loadSuggestionButton"),document.addEventListener("inlinecomment:collapse",()=>{Xe()});function Pt(e,t,n){const s=e.querySelector(`.js-line-comments.${t}`);if(s)return s;const o=Re("js-inline-comments-split-form-container-template",n).firstElementChild;o.classList.add(t);const i=e.querySelectorAll(`.${t}`);i[i.length-1].after(o);for(const m of i)m.remove();return o}r(Pt,"expandLineCommentsEmptyCells");function Ht(e){let t=Qe(e,".js-inline-comments-container");if(t)return t;{const n="js-inline-comments-split-container-template",s=document.getElementById(n);if(!s)throw new Error(`Could not find element with id ${n}`);if(!(s instanceof HTMLTemplateElement))throw new Error(`Found element with id ${n} - but was not a Template`);return t=new W.R(s,{}).firstElementChild,e.after(t),t}}r(Ht,"inlineCommentsSplitContainerForLine");function Je(e,t,n,s){if(e.classList.remove("color-bg-success","color-bg-danger"),s){e.textContent=t;return}if(n==="right"){e.classList.add("color-fg-success"),e.textContent=`+${t}`;return}if(n==="left"){e.classList.add("color-fg-danger"),e.textContent=`-${t}`;return}e.textContent=String(t)}r(Je,"applyMultiLinePreview");const et={R:"right",L:"left"};function Nt(e,t){const n=(0,O.vu)();if(!n||n.end.is(n.start))return;if(!(0,O.Oz)(t,n)){(0,O.MO)();return}const{start:{lineNumber:s},end:{lineNumber:o}}=n;let{start:{side:i},end:{side:c}}=n;const m=Number(t.getAttribute("data-line")),P=t.getAttribute("data-side");if(m!==o||!n.end.isContext()&&P!==et[c]){(0,O.MO)();return}const F=et[i],x=e.elements.namedItem("start_line"),$=e.elements.namedItem("start_side"),U=e.elements.namedItem("line"),Y=e.elements.namedItem("side"),J=e.elements.namedItem("preview_start_side"),ie=e.elements.namedItem("preview_side");if(x instanceof HTMLInputElement&&$ instanceof HTMLInputElement&&U instanceof HTMLInputElement&&Y instanceof HTMLInputElement&&J instanceof HTMLInputElement&&ie instanceof HTMLInputElement){x.value=String(s),$.value=F,$.value=J.value=$.value,ie.value=Y.value;const V=x.value;i=$.value;const fe=U.value;c=Y.value;const me=e.closest(".js-inline-comment-form-container");if(V&&fe){const we=me.querySelector(".js-multi-line-preview"),Tt=we.querySelector(".js-multi-line-preview-start"),de=we.querySelector(".js-multi-line-preview-end"),ve=n.start.isContext(),En=n.end.isContext();Je(Tt,V,i,ve),Je(de,fe,c,En),we.hidden=!1,me.classList.add("is-multiline")}else me.querySelector(".js-multi-line-preview").hidden=!0,me.classList.remove("is-multiline");Ve(me)}}r(Nt,"fillMultilineFormFields");function tt(e,t){var n;const s=["type","path","position","line","side","original-line"];for(const i of s){const c=e.elements.namedItem(i);if(c instanceof HTMLInputElement){const m=t.getAttribute(`data-${i}`)||"";c.value=m}}const o=(n=e.getElementsByClassName("js-expanded-diff-placeholder-value"))==null?void 0:n[0];if(o instanceof HTMLInputElement){const i=t.getAttribute("data-expanded-diff")||"";o.value=i}Nt(e,t)}r(tt,"fillTemplateFormFields");function Re(e,t){const n=document.getElementById(e);if(!n)throw new Error(`Could not find element with id ${e}`);if(!(n instanceof HTMLTemplateElement))throw new Error(`Found element with id ${e} - but was not a Template`);return new W.R(n,{anchor:t.getAttribute("data-anchor")||"",position:t.getAttribute("data-position")||"",sequence:kt++})}r(Re,"renderCommentTemplate");var Ae=d(79046),Se=d(14037),$t=d(17364);(0,l.N7)(".js-diff-progressive-container",function(e){nt(e);const t=e.querySelector(".js-diff-progressive-loader");!t||t.addEventListener("load",function(){nt(e)})});function Wt(e,t){var n;const s=e.querySelectorAll(".js-comment-container");for(const o of s){const i=o.getAttribute("data-hidden-comment-ids");if(i){const c=i.split(","),m=(n=t.match(/\d+/g))==null?void 0:n[0];if(m&&c.includes(m)){(0,$t.$)(o);break}}}}r(Wt,"loadResolvedComments");function nt(e){const t=st();if(!t)return;ot(e,t);const n=Ut(e,t);!n||((0,T.zT)(n),it(n))}r(nt,"processProgressiveContainer"),(0,l.N7)(".js-diff-load-container",function(e){const t=e.querySelector(".js-diff-entry-loader");!t||t.addEventListener("load",function(){e.closest(".js-file").classList.remove("hide-file-notes-toggle");const s=st();!s||ot(e,s)})}),(0,f.on)("click",".js-diff-load",function(e){if(e.target.classList.contains("js-ignore-this"))return;const t=e.currentTarget.closest(".js-diff-load-container");it(t)});function st(){return window.location.hash.slice(1)}r(st,"urlAnchor");function ot(e,t){let n;t.match(/^diff-.+[LR]\d+-[LR]\d+/)?n=(0,Se.Q)(e.ownerDocument,t.substring(0,t.indexOf("-",5))):n=(0,Se.Q)(e.ownerDocument,t),n&&e.contains(n)?((0,Ae.O4)(n),(0,T.zT)(n)):Wt(e,t)}r(ot,"scrollToAnchor");function Ut(e,t){const n=Vt(e,t);return n||zt(e,t)}r(Ut,"getEntryFromAnchor");function Vt(e,t){const n=/^(diff-[0-9a-f]{32})(?:[L|R]\d+)?$/.exec(t);if(!n)return;const s=n[1],o=e.querySelector(`a[name='${s}']`);if(!o)return;const i=o.nextElementSibling;if(!(i&&!i.querySelector(".js-diff-load-container")))return i}r(Vt,"getEntryFromDiffAnchor");function zt(e,t){const n=/^(?:r|commitcomment-)(\d+)$/.exec(t);if(!n)return;const s=n[1],o=e.querySelector(`#diff-with-comment-${s}`);return o?o.closest(".js-file"):void 0}r(zt,"getEntryFromCommentAnchor");function it(e){const t=e.querySelector(".js-diff-entry-loader"),n=e.querySelector(".js-diff-placeholder"),s=e.querySelector("button.js-diff-load"),o=e.querySelector(".js-button-text");n.setAttribute("fill","url('#animated-diff-gradient')"),o.textContent=s.getAttribute("data-disable-with")||"",s.disabled=!0;const i=new URL(t.getAttribute("data-fragment-url")||"",window.location.origin);return t.src=i.toString(),t.data}r(it,"loadDiff");var Kt=d(40728);(0,f.on)("click",".js-rendered, .js-source",function(e){const t=e.currentTarget;if(t.classList.contains("selected")){e.preventDefault();return}Qt(t),Zt(t)}),(0,C.AC)(".js-prose-diff-toggle-form",async function(e,t){const n=e.closest(".js-details-container"),s=n.querySelector(".js-file-content"),o=await t.html();for(;s.lastChild;)s.removeChild(s.lastChild);s.append(o.html),n.classList.toggle("display-rich-diff"),n.classList.toggle("show-inline-notes")});function Qt(e){const t=e.closest(".js-file-header"),n=e.classList.contains("js-rendered"),s=e.classList.contains("js-source"),o=t.getAttribute("data-short-path"),i=t.getAttribute("data-anchor"),c=new URL(window.location.href,window.location.origin),m=new URLSearchParams(c.search.slice(1));c.hash=i,n?m.set("short_path",o):s&&m.delete("short_path"),c.search=m.toString(),(0,Kt.lO)(null,"",c.toString())}r(Qt,"updateWindowLocation");function Zt(e){for(const t of document.querySelectorAll(".js-rendered, .js-source"))t.classList.remove("selected"),t.removeAttribute("aria-current");e.classList.add("selected"),e.setAttribute("aria-current","true")}r(Zt,"updateSelectedButton"),(0,f.on)("click",".js-toc-retry",function(e){if(!(e.target instanceof Element))return;const n=e.target.closest(".select-menu").querySelector("include-fragment"),s=n.getAttribute("src");n.setAttribute("src",""),n.setAttribute("src",s)});var Gt=d(43682);function rt(e,t,n){const s=Array.from(e.querySelectorAll('[role="menuitem"]'));let o=s.indexOf(t),i=s.indexOf(n);if(o===-1)throw new Error("Couldn't find startIndex in container");if(i===-1)throw new Error("Couldn't find endItem in container");ct(e),s[i].classList.add("is-last-in-range"),o>i&&([o,i]=[i,o]);for(const c of s.slice(o,i+1))c.classList.add("is-range-selected")}r(rt,"highlightSelectedRange");async function Xt(e,t){function n(s){rt(e,t,s.target.closest('[role="menuitem"]'))}r(n,"highlightRange"),rt(e,t,t),e.addEventListener("mouseover",n),await new Promise(s=>window.addEventListener("keyup",s,{once:!0})),e.removeEventListener("mouseover",n),ct(e)}r(Xt,"observeShiftRangeHighlights");function ct(e){for(const t of e.querySelectorAll('[role="menuitem"]'))t.classList.remove("is-range-selected","is-last-in-range")}r(ct,"resetHighlight"),(0,l.N7)(".js-diffbar-range-menu .js-diffbar-range-list",{subscribe:Yt});function Yt(e){const t=e.closest("details-menu");let n=!1;function s(i){n=i.shiftKey,n&&i.preventDefault()}r(s,"clicked");function o(i){if(!n)return;i.preventDefault();const c=i.detail.relatedTarget;if(c.classList.contains("is-range-selected")){i.stopPropagation();const m=e.querySelectorAll(".is-range-selected"),P=m[0],F=m[1],x=e.getAttribute("data-range-url"),$=P.getAttribute("data-parent-commit"),U=F.getAttribute("data-commit"),Y=$&&U?`${$}..${U}`:U,J=x.replace("$range",Y);(0,Gt.ZP)({url:J,container:document.querySelector("#js-repo-pjax-container")})}else i.stopImmediatePropagation(),Xt(e,c)}return r(o,"selected"),e.addEventListener("click",s,{capture:!0}),t.addEventListener("details-menu-select",o),{unsubscribe:()=>{e.removeEventListener("click",s,{capture:!0}),t.removeEventListener("details-menu-select",o)}}}r(Yt,"manageRangeHighlight"),(0,f.on)("toggle",".js-diffbar-range-menu",function(e){const t=e.currentTarget;if(!t.hasAttribute("open"))return;const n=t.querySelector(".in-range");n&&n.focus()},{capture:!0});var lt=d(12585);(0,f.on)("click",".js-compare-tab",function(e){for(const s of document.querySelectorAll(".js-compare-tab.selected"))s.classList.remove("selected");e.currentTarget.classList.add("selected");for(const s of document.querySelectorAll("#commits_bucket, #files_bucket, #commit_comments_bucket"))s.classList.add("d-none");const n=e.currentTarget.hash;document.querySelector(n).classList.remove("d-none"),e.preventDefault()}),(0,w.Z)(function({target:e}){if(!(e instanceof HTMLElement))return;const t=e.closest("#commits_bucket, #files_bucket, #commit_comments_bucket");t&&t instanceof HTMLElement&&!(0,lt.Z)(t)&&document.querySelector(`.js-compare-tab[href="#${t.id}"]`).click()}),(0,f.on)("click",".js-toggle-range-editor-cross-repo",function(){document.querySelector(".js-range-editor").classList.toggle("is-cross-repo")}),(0,f.on)("pjax:click",".js-range-editor",function(e){const t=document.querySelector(".js-compare-pr");if(t&&t.classList.contains("open")){const n=e.detail.options,s=new URL(n.url,window.location.origin);s.search.match(/expand=1/)||(s.search+=`${s.search?"&":""}expand=1`,n.url=s.toString())}}),(0,l.N7)(".js-compare-pr.open",{add(){document.body.classList.add("is-pr-composer-expanded")},remove(){document.body.classList.remove("is-pr-composer-expanded")}}),(0,f.on)("change",".js-collab-checkbox",function({currentTarget:e}){const t=e.form;for(const o of t.querySelectorAll(".errored"))o.classList.remove("errored");const s=e.closest(".js-collab-option").querySelector(".js-status-indicator");s.classList.remove("status-indicator-success","status-indicator-failed"),s.classList.add("status-indicator-loading")}),(0,C.AC)(".js-collab-form",async function(e,t){try{await t.text()}catch{for(const s of e.querySelectorAll(".status-indicator-loading")){s.classList.remove("status-indicator-loading"),s.classList.add("status-indicator-failed");const o=s.closest(".js-collab-option");o.classList.add("errored");const i=o.querySelector(".js-collab-checkbox");i.checked=!i.checked}for(const s of e.querySelectorAll(".status-indicator-success"))s.classList.remove("status-indicator-success");return}for(const n of e.querySelectorAll(".errored"))n.classList.remove("errored");for(const n of e.querySelectorAll(".status-indicator-loading"))n.classList.remove("status-indicator-loading"),n.classList.add("status-indicator-success")});var te=d(90420),at=d(3447),Jt=Object.defineProperty,en=Object.getOwnPropertyDescriptor,ae=r((e,t,n,s)=>{for(var o=s>1?void 0:s?en(t,n):t,i=e.length-1,c;i>=0;i--)(c=e[i])&&(o=(s?c(t,n,o):c(o))||o);return s&&o&&Jt(t,n,o),o},"__decorateClass"),dt=r((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},"__accessCheck"),je=r((e,t,n)=>(dt(e,t,"read from private field"),n?n.call(e):t.get(e)),"__privateGet"),qe=r((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},"__privateAdd"),Me=r((e,t,n,s)=>(dt(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),"__privateSet"),Ee,Te,ke,Ce;let le=r(class extends HTMLElement{constructor(){super(...arguments);this.sidebarHidden=!1,qe(this,Ee,null),qe(this,Te,null),qe(this,ke,void 0),qe(this,Ce,void 0),this.handleSidebarScroll=()=>{Me(this,Ee,requestAnimationFrame(this.updateSidebarHeight))},this.updateSidebarHeight=()=>{if(!this.sidebarContainer)return;const e=document.documentElement.clientHeight,t=this.prToolbar.getBoundingClientRect(),n=this.mainContainer.getBoundingClientRect(),s=e>=n.bottom,o=t.top===0;let i;s?i=n.bottom-parseInt(this.sidebarContainer.style.top):o?i=e-t.height:i=e-parseInt(this.sidebarContainer.style.top),this.sidebarContainer.style.height=`${i}px`}}connectedCallback(){if(!this.sidebarContainer)return;Me(this,Ce,new MutationObserver(this.handleNotificationShelfMutation)),je(this,Ce).observe(document.body,{subtree:!0,childList:!0});const{signal:e}=Me(this,ke,new AbortController);window.addEventListener("scroll",this.handleSidebarScroll,{signal:e}),window.addEventListener("resize",()=>this.handleSidebarResize(),{signal:e}),this.handleSidebarScroll()}disconnectedCallback(){var e;!this.sidebarContainer||(je(this,Ce).disconnect(),(e=je(this,ke))==null||e.abort(),je(this,Ee)!=null&&cancelAnimationFrame(je(this,Ee)),je(this,Te)!=null&&cancelAnimationFrame(je(this,Te)))}toggleSidebar(e){if(this.layoutContainer.classList.toggle("hx_Layout--sidebar-hidden"),this.sidebarHidden=!this.sidebarHidden,!this.fileTree)return;const t=e.detail.toggleButton;!t||(this.fileTree.instrumentToggleFileTree(t),!!this.fileTreePathFilter&&t.id==="show-file-tree-button"&&this.fileTreePathFilter.focus())}handleOpenFilesListHotkeyEvent(){if(this.shouldOpenTocMenu()){this.tocMenuButton.click();return}!this.fileTree||(this.showFileTreeButton&&this.sidebarHidden?this.showFileTreeButton.click():this.fileTreePathFilter&&!this.sidebarHidden&&this.fileTreePathFilter.focus())}shouldOpenTocMenu(){return!!(this.tocMenu&&!this.tocMenu.hasAttribute("open")&&window.getComputedStyle(this.tocMenu).display!=="none")}handleNotificationShelfMutation(e){const t=document.firstElementChild;if(!!t.classList.contains("js-skip-scroll-target-into-view"))for(const n of e){for(const s of n.addedNodes)if(s instanceof HTMLElement&&s.classList.contains("js-notification-top-shelf")){t.classList.add("has-notification-top-shelf");break}for(const s of n.removedNodes)if(s instanceof HTMLElement&&s.classList.contains("js-notification-top-shelf")){t.classList.remove("has-notification-top-shelf");break}}}handleSidebarResize(){Me(this,Te,requestAnimationFrame(this.updateSidebarHeight))}},"DiffLayoutElement");Ee=new WeakMap,Te=new WeakMap,ke=new WeakMap,Ce=new WeakMap,ae([te.Lj],le.prototype,"sidebarHidden",2),ae([te.fA],le.prototype,"layoutContainer",2),ae([te.fA],le.prototype,"prToolbar",2),ae([te.fA],le.prototype,"tocMenu",2),ae([te.fA],le.prototype,"tocMenuButton",2),ae([te.fA],le.prototype,"mainContainer",2),ae([te.fA],le.prototype,"sidebarContainer",2),ae([te.fA],le.prototype,"fileTree",2),ae([te.fA],le.prototype,"showFileTreeButton",2),ae([te.fA],le.prototype,"fileTreePathFilter",2),ae([(0,at.D)(100)],le.prototype,"handleSidebarResize",1),le=ae([te.Ih],le),(0,f.on)("click",".js-split-diff-view",function(){const e=document.querySelector(".js-unified-diff-view-box"),t=document.querySelector(".js-split-diff-view-box"),n=document.querySelector(".js-split-diff-view-option"),s=document.querySelector(".js-unified-diff-view-option");t.classList.add("color-border-accent-emphasis"),t.classList.remove("color-border-default"),e.classList.remove("color-border-accent-emphasis"),e.classList.add("color-border-default"),s.checked=!1,n.checked=!0}),(0,f.on)("click",".js-unified-diff-view",function(){const e=document.querySelector(".js-unified-diff-view-box"),t=document.querySelector(".js-split-diff-view-box"),n=document.querySelector(".js-split-diff-view-option"),s=document.querySelector(".js-unified-diff-view-option");t.classList.remove("color-border-accent-emphasis"),t.classList.add("color-border-default"),e.classList.add("color-border-accent-emphasis"),e.classList.remove("color-border-default"),s.checked=!0,n.checked=!1});var tn=d(27034);(0,f.on)("details:toggled",".js-pull-merging",function({currentTarget:e}){const t=Array.from(e.querySelectorAll(".js-merge-pull-request")),n=t.some(lt.Z);for(const s of t)s.classList.toggle("is-dirty",n)}),(0,f.on)("click",".js-merge-box-try-again",async function({currentTarget:e}){const t=e.getAttribute("data-form-target");if(!["js-cleanup-branch-form","js-merge-branch-form","js-queue-branch-form","js-update-branch-form"].includes(t))return;const s=e.closest(".js-pull-merging").getElementsByClassName(t)[0];(0,f.f)(s,"submit")}),document.addEventListener("session:resume",function(e){const t=document.getElementById(e.detail.targetId);if(t){const n=t.closest(".js-merge-pull-request");if(n){const s=n.closest(".js-details-container");s&&s.classList.add("open")}}}),(0,f.on)("change",".js-admin-merge-override",function({currentTarget:e}){const t=e.closest(".js-merge-message-container"),n=e.checked,s=t.querySelector(".js-merge-box"),o=t.querySelector(".js-auto-merge-box"),i=t.querySelector(".js-merge-form"),c=t.querySelector(".js-auto-merge-form"),m=t.querySelector(".js-queue-branch-form"),P=t.querySelectorAll(".merge-box-button");s&&(s.hidden=!n),o&&(o.hidden=n),i&&(i.hidden=!n),c&&(c.hidden=n),m&&(m.hidden=n);for(const F of P)F.disabled=!n}),(0,f.on)("details-menu-selected",".js-update-branch-method-menu",nn,{capture:!0});function nn(e){const t=e.detail.relatedTarget,n=t.closest(".js-merge-pr");n.classList.toggle("is-updating-via-merge",t.value==="merge"),n.classList.toggle("is-updating-via-rebase",t.value==="rebase");const s=n.querySelector(".js-update-branch-type");s&&(s.value=t.value)}r(nn,"updateBranchUpdateMethod"),(0,f.on)("submit",".js-update-branch-form",function({currentTarget:e}){var t;const n=e.closest(".js-merge-pr"),s=n==null?void 0:n.querySelector(".btn-group-update-merge");s&&(s.disabled=!0);const o=n==null?void 0:n.querySelector(".btn-group-update-rebase");o&&(o.disabled=!0);const i=n==null?void 0:n.querySelector(".js-update-method-menu-button");i&&(i.classList.add("disabled","user-select-none"),i.setAttribute("aria-disabled","true"));const c=n==null?void 0:n.querySelector(".js-update-branch-method-menu");c&&((t=c==null?void 0:c.parentNode)==null||t.removeChild(c))}),(0,f.on)("details-menu-selected",".js-merge-method-menu",sn,{capture:!0});function sn(e){const t=e.detail.relatedTarget,n=t.closest(".js-merge-pr"),s=n.querySelector(".js-merge-pull-request"),o=n.querySelector(".js-merge-method-menu-button"),i=o.getAttribute("data-merge-button-class");o.classList.toggle("btn-danger",t.hasAttribute("data-dangerous-action")),i&&o.classList.toggle(i,!t.hasAttribute("data-dangerous-action"));const c=n.querySelector(".js-merge-title"),m=n.querySelector(".js-merge-message");c.defaultValue===c.value&&(c.defaultValue=c.value=t.getAttribute("data-input-title-value")),m.defaultValue===m.value&&(m.defaultValue=m.value=t.getAttribute("data-input-message-value")),n.classList.toggle("is-merging",t.value==="merge"),n.classList.toggle("is-squashing",t.value==="squash"),n.classList.toggle("is-rebasing",t.value==="rebase"),n.classList.toggle("is-merging-group",t.value==="group"),n.classList.toggle("is-merging-solo",t.value==="solo"),n.classList.toggle("is-merging-jump",t.value==="jump");const P=s.classList.contains("js-admin-override-merge")&&t.value==="merge"||s.classList.contains("js-admin-override-squash")&&t.value==="squash"||s.classList.contains("js-admin-override-rebase")&&t.value==="rebase",F=n.querySelector(".js-merge-type");F&&(F.value=t.value);const x=n.querySelectorAll(".js-merge-pull-request .js-merge-commit-button");for(const J of x)J.type=t.value===J.value?"submit":"button";s.classList.toggle("color-fg-danger",P);const $=n.closest(".js-pull-merging"),U=new URL($.getAttribute("data-url"),window.location.origin),Y=new URLSearchParams(U.search);Y.set("merge_type",t.value),U.search=Y.toString(),$.setAttribute("data-url",U.toString())}r(sn,"updateForMergeMethod"),(0,f.on)("details:toggled",".js-merge-pr",function(e){const n=e.currentTarget.querySelector(".js-merge-message");n&&(0,f.f)(n,"change")}),(0,l.N7)(".branch-action-item.js-details-container.open",{add(e){for(const t of e.querySelectorAll(".js-merge-review-section"))t.setAttribute("open","")},remove(e){for(const t of e.querySelectorAll(".js-merge-review-section"))t.removeAttribute("open")}}),(0,f.on)("toggle",".js-details-container .js-merge-review-section",function({currentTarget:e}){const t=e.closest(".js-details-container"),n=t.querySelectorAll(".js-merge-review-section").length,s=t.querySelectorAll(".js-merge-review-section[open]").length;s===0?(0,Ae.Qp)(t,{force:!1}):s===n&&(0,Ae.Qp)(t,{force:!0})},{capture:!0}),(0,l.N7)("poll-include-fragment[data-to-be-polled]",{constructor:tn.Z,add(e){function t(){e.src=e.getAttribute("data-to-be-polled"),e.removeAttribute("data-to-be-polled")}r(t,"onVisible"),document.hidden?document.addEventListener("visibilitychange",t,{once:!0}):t()}}),(0,f.on)("submit",".js-remove-from-queue-form",async e=>{const t=e.currentTarget;e.preventDefault();const n=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{Accept:"application/json"}});n&&n.ok||(window.onbeforeunload=()=>{window.scrollTo({top:0})},window.location.reload())});var Fe=d(96776);let Be=!1;document.addEventListener("keydown",function(e){e.key==="Alt"&&(Be=!0)}),document.addEventListener("keyup",function(e){e.key==="Alt"&&(Be=!1)}),(0,f.on)("click",".js-toggle-outdated-comments",function(e){if(!(e instanceof MouseEvent&&e.altKey||Be)||!(e.currentTarget instanceof HTMLElement))return;const t=e.currentTarget,n=t.closest("details");function s(){const o=n.hasAttribute("open");for(const i of document.querySelectorAll(".js-toggle-outdated-comments"))i!==t&&i.closest("details").toggleAttribute("open",o)}r(s,"toggleAll"),setTimeout(()=>{(0,Fe.uQ)(t,s)})});function ut(){const e=document.querySelectorAll(".pull-request-ref-restore");for(let t=0;t<e.length;t++)e[t].classList.toggle("last",t===e.length-1)}r(ut,"syncLast"),(0,l.N7)(".pull-request-ref-restore",{add:ut,remove:ut});function ft(){const e=document.querySelector("#js-pull-restorable")!=null,t=document.querySelector(".js-pull-discussion-timeline");t&&t.classList.toggle("is-pull-restorable",e)}r(ft,"syncRestorable"),(0,l.N7)("#js-pull-restorable",{add:ft,remove:ft});var on=d(52134);function rn(e,t){const n=e.closest(".js-review-state-classes"),s=document.querySelector(".js-review-changes");n.classList.toggle("is-review-pending",t>0);for(const o of document.querySelectorAll(".js-pending-review-comment-count"))o.textContent=String(t);for(const o of document.querySelectorAll(".js-pending-comment-count-type"))o instanceof HTMLElement&&(o.textContent=o.getAttribute(t===1?"data-singular-string":"data-plural-string"));if(t>0){s.textContent=s.getAttribute("data-pending-message")||"";const o=e.querySelector(".js-reviews-toggle");o.classList.add("anim-pulse-in"),o.addEventListener("animationend",()=>o.classList.remove("anim-pulse-in"),{once:!0})}else s.textContent=s.getAttribute("data-message")||""}r(rn,"updatePendingCommentsCount");function mt(e){const t=document.querySelector(".js-reviews-container");t&&setTimeout(()=>rn(t,e))}r(mt,"updatePendingHandler"),(0,C.AC)(".js-inline-comment-form",async function(e,t){const n=await t.text();mt(n.json.pendingReviewCommentsCount)}),(0,C.AC)(".js-pending-review-comment .js-comment-delete",async function(e,t){const n=await t.text();mt(n.json.pendingReviewCommentsCount)}),(0,C.AC)(".js-resolvable-timeline-thread-form",async function(e,t){try{const n=await t.html();e.closest(".js-resolvable-timeline-thread-container").replaceWith(n.html)}catch{(0,on.v)()}}),(0,C.AC)(".js-toggle-user-reviewed-file-form",async function(e,t){const n=e.closest(".js-details-container"),s=!!n.querySelector(".js-reviewed-file"),o=n.classList.contains("open"),i=n.querySelector(".js-file-header"),c=i?i.getBoundingClientRect().top===60:!1;(!s&&o||s&&!o)&&((0,Ae.Qp)(n),c&&(0,T.zT)(n));const m=e.querySelector(".js-reviewed-toggle");s?(m.classList.remove("color-bg-accent","color-border-accent"),m.classList.add("color-fg-muted","color-border-default")):(m.classList.remove("color-fg-muted","color-border-default"),m.classList.add("color-bg-accent","color-border-accent"));const P=m.querySelector(".js-reviewed-checkbox");P.disabled=!0;const F=document.querySelector("progress-bar");F instanceof Ie&&(s?F.decrement():F.increment());const x=document.getElementById(`file-tree-item-${n.id}`);x&&x.toggleAttribute("data-file-user-viewed");const $=await t.html(),U=e.closest(".js-replace-file-header-review");U&&(U.replaceWith($.html),n.toggleAttribute("data-file-user-viewed"))});function Pe(e){return e.getAttribute("ratio").split("/")}r(Pe,"parseRatio");function gt(e){if(e){const[t,n]=Pe(e),s=parseInt(t)/parseInt(n),o=e.querySelector(".js-review-progress"),i=e.querySelector(".js-review-count");o instanceof HTMLElement&&i&&(o.style.width=`${s*100}%`,i.textContent=`${t} / ${n}`)}}r(gt,"refresh");class Ie extends HTMLElement{static get observedAttributes(){return["ratio"]}attributeChangedCallback(t){t==="ratio"&&gt(this)}connectedCallback(){gt(this)}increment(){const[t,n]=Pe(this),s=Math.min(parseInt(t)+1,parseInt(n));this.setAttribute("ratio",`${s}/${n}`)}decrement(){const[t,n]=Pe(this),s=Math.min(parseInt(t)-1,parseInt(n));this.setAttribute("ratio",`${s}/${n}`)}}r(Ie,"ProgressBarElement"),window.customElements.get("progress-bar")||(window.ProgressBarElement=Ie,window.customElements.define("progress-bar",Ie));var cn=d(34782),ln=d(81654);document.addEventListener("pjax:end",function(){for(const e of document.querySelectorAll(".js-pull-refresh-on-pjax"))(0,xe.x0)(e)}),(0,l.N7)(".js-updating-pull-request-commits-count",{add(e){const t=e.textContent,n=document.querySelectorAll(".js-updateable-pull-request-commits-count");for(const s of n)s.textContent=t}}),(async()=>{if(await cn.x,window.performance&&window.performance.navigation&&window.performance.navigation.type===window.performance.navigation.TYPE_RELOAD){const e=document.getElementById("js-report-pull-request-refresh");e&&(0,ln.Fk)(e)}})();var ht=d(2699),an=d(97105);function dn(e){const t=e.querySelector(".js-diff-entry-loader"),n=e.querySelector(".js-diff-placeholder"),s=e.querySelector("button.js-diff-load"),o=e.querySelector(".js-button-text");n.setAttribute("fill","url('#animated-diff-gradient')"),o.textContent=s.getAttribute("data-disable-with")||"",s.disabled=!0;const i=new URL(t.getAttribute("data-fragment-url")||"",window.location.origin);return t.src=i.toString(),t.data}r(dn,"expander_loadDiff");function Oe(e){(0,Ae.O4)(e),(0,T.zT)(e)}r(Oe,"scrollIntoView"),(0,w.Z)(r(function(){const t=un(window.location.hash);!t||(0,Se.Q)(document,t.hashFragment)&&!t.lastLine||He(t,0)},"handleHashChange"));function un(e){if(!e)return;const t=(0,an.s)(e);if(!t)return;const n=t[1],s=t[2],o=t[3],i=t[5],c=n+s+o,m=n+s;return{anchor:n,side:s,line:o,lastLine:i,hashFragment:c,partialHashFragment:m}}r(un,"parseExpansion");async function He(e,t){const{anchor:n,side:s,line:o,lastLine:i,hashFragment:c,partialHashFragment:m}=e,P=(0,Se.Q)(document,n);if(!P)return;const F=P.nextElementSibling;if(!F)return;const x=yt(F,s,o,i);if(!x.length){const J=(0,Se.Q)(document,c);if(J){Oe(J);return}const ie=F.querySelector(".js-diff-load-container");if(!ie)return;try{await dn(ie);const V=(0,Se.Q)(document,c);V instanceof HTMLElement&&Oe(V)}catch{Oe(F)}return}await fn(x,m);const $=1,U=(0,Se.Q)(document,c);yt(F,s,o,i).length?He(e,t):U?Oe(U):t<$&&He(e,t+1)}r(He,"findAndActivateExpander"),(0,f.on)("click",".js-expand",function(e){e.preventDefault(),pt(e.currentTarget)});function fn(e,t){return Promise.all(e.map(n=>pt(n,t)))}r(fn,"activateExpanders");async function pt(e,t){let n;if(t){const x=t.slice(-1)==="R"?"data-right-range":"data-left-range",$=e.getAttribute(x)||"",U=parseInt($.split("-")[0],10);n=t+U}else n=e.hash.slice(1);const s=e.getAttribute("data-url"),o=new URL(s,window.location.origin),i=new URLSearchParams(o.search.slice(1));i.append("anchor",n),o.search=i.toString(),window.location.hash!==""&&window.history.replaceState(null,"","#");const c=await(0,g.a)(document,o.toString()),m=e.closest(".js-file");if(!m)return;const P=e.closest(".js-expandable-line"),F=bt(P,".file-diff-line");F?(0,Fe.uQ)(F,()=>{P.replaceWith(c)}):P.replaceWith(c),(0,f.f)(m,"expander:expanded"),mn(m)}r(pt,"activateExpander");function bt(e,t){const n=e.nextElementSibling;return n instanceof HTMLElement&&n.matches(t)?n:null}r(bt,"expander_next");function yt(e,t,n,s){const o=parseInt(n,10),i=parseInt(s||"",10);return Array.from(e.querySelectorAll(".js-expand")).filter(c=>{const m=t==="R"?"data-right-range":"data-left-range",P=(c.getAttribute(m)||"").split("-"),F=parseInt(P[0],10),x=parseInt(P[1],10);return F<=o&&o<=x||o<=F&&x<=i?!0:F<=i&&i<=x})}r(yt,"findExpanders");function mn(e){const t=e.querySelector(".js-expand-full-wrapper");if(!t)return;Array.from(e.querySelectorAll(".js-expand")).length===0&&t.parentElement.removeChild(t)}r(mn,"removeExpandAllButton");async function gn(e,t){const n=await self.fetch(t,{headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!n.ok)throw new Error(`Request to blob_expand failed with status code ${n.status}`);return(0,ht.t)((0,ht.P)(e),n,!0),(await n.json()).map(o=>({...o,content:(0,h.r)(e,o.content)}))}r(gn,"fetchManySafeDocumentFragments"),(0,f.on)("click",".js-expand-full",async e=>{e.preventDefault();const t=e.currentTarget,n=t.closest(".file"),s=t.getAttribute("data-url"),o=pn(n);if(o.length===0)return;const i=new URL(s,window.location.origin),c=new URLSearchParams(i.search.slice(1));for(const x of o)c.append("ranges[]last_left",x.left.start),c.append("ranges[]left",x.left.end),c.append("ranges[]left_hunk_size",x.left.size),c.append("ranges[]last_right",x.right.start),c.append("ranges[]right",x.right.end),c.append("ranges[]right_hunk_size",x.right.size),c.append("ranges[]position",x.position);i.search=c.toString();const m=await gn(document,i.toString()),P=[...n.querySelectorAll(".js-expand")];for(const{content:x,position:$}of m){const U=parseInt($,10),Y=P[U];if(!Y)return;const J=Y.closest(".js-expandable-line"),ie=bt(J,".file-diff-line");ie?(0,Fe.uQ)(ie,()=>{J.after(x)}):J.after(x),J.setAttribute("hidden","true")}t.setAttribute("hidden","true");const F=n.querySelector(".js-collapse-diff");F&&F.removeAttribute("hidden"),n.classList.add("open"),n.classList.add("Details--on")}),(0,f.on)("click",".js-collapse-diff",e=>{const t=e.currentTarget,n=t.closest(".file"),s=[...n.querySelectorAll('.blob-expanded[data-expanded-full="true"]')];for(const c of s)c.parentElement.removeChild(c);const o=[...n.querySelectorAll(".js-expandable-line")];for(const c of o)c.removeAttribute("hidden");t.setAttribute("hidden","true");const i=n.querySelector(".js-expand-full");i&&i.removeAttribute("hidden")});function hn(e,t){const s=new URL(e.getAttribute("data-url"),window.location.origin).searchParams;return{position:t.toString(),left:{start:s.get("last_left"),end:s.get("left"),size:s.get("left_hunk_size")},right:{start:s.get("last_right"),end:s.get("right"),size:s.get("right_hunk_size")}}}r(hn,"getExpanderRange");function pn(e){const n=Array.from(e.querySelectorAll(".js-expand")).map((i,c)=>hn(i,c));let s=!1;const o=[];for(let i=0;i<n.length;i++){if(s){s=!1;continue}const c=n[i],m=n[i+1];s=m&&c.left.start===m.left.start&&c.left.end===m.left.end&&c.right.start===m.right.start&&c.right.end===m.right.end,o.push(c)}return o}r(pn,"getAllHunkRanges");class _e{constructor(t){this.selection=t,this.anchorNode=t.anchorNode}range(){var t;let n;return((t=this.selection)==null?void 0:t.rangeCount)>0&&(n=this.selection.getRangeAt(0)),n}canBeSideProtected(){try{return!!(this.hasSelectedText()&&this.confinedTable())}catch{return!1}}isSideProtected(){var t;try{return!!((t=this.confinedTable())==null?void 0:t.getAttribute("data-lock-side-selection"))}catch{return!1}}hasSelectedText(){const t=this.range();return t?t.toString().length>0:!1}clearSelectedText(){this.selection.removeAllRanges()}confinedTable(){var t,n;const s=(n=(t=this.range())==null?void 0:t.commonAncestorContainer)==null?void 0:n.parentElement;return(s==null?void 0:s.matches(".diff-table"))?s:(s==null?void 0:s.matches(".js-file-content"))?s==null?void 0:s.querySelector("table.diff-table"):s==null?void 0:s.closest("table.diff-table")}unprotectedSide(){var t,n;let s;return this.anchorNode instanceof HTMLTableCellElement?s=this.anchorNode.closest("td[data-split-side]"):s=(n=(t=this.anchorNode)==null?void 0:t.parentElement)==null?void 0:n.closest("td[data-split-side]"),s==null?void 0:s.getAttribute("data-split-side")}protectedSide(){return this.unprotectedSide()==="left"?"right":"left"}applySideProtection(){if(this.unprotectedSide()){const t=this.confinedTable(),n=this.unprotectedSide();t&&n&&t.setAttribute("data-lock-side-selection",n)}}clearSideProtection(){const t=document.querySelectorAll("table[data-lock-side-selection]");for(const n of t)n.removeAttribute("data-lock-side-selection")}filteredTableRows(){const t=[];for(let n=0;n<this.selection.rangeCount;n++){const o=this.selection.getRangeAt(n).cloneContents();if(o.querySelectorAll("td").length){const i=`td[data-split-side=${this.protectedSide()}], td.js-linkable-line-number, td.empty-cell`,c=o.querySelectorAll(i);for(const m of c)m.parentNode&&m.parentNode.removeChild(m);t.push(...o.children)}else{const i=document.createElement("TR"),c=document.createElement("TD");c.append(...o.childNodes),i.append(c),t.push(i)}}return t}contentToString(){var t;const n=[],s=document.createElement("table");s.classList.add("invisible"),s.append(...this.filteredTableRows()),(t=this.confinedTable())==null||t.append(s);const o=s.children;for(let i=0;i<o.length;i++){const m=o[i].innerText;m&&(m===`
`?n.push(""):n.push(m))}return s.remove(),n.join(`
`)}}r(_e,"DiffTableSideProtection");function vt(e){return Math.floor(e/2)}r(vt,"tableSide");function bn(e){var t;const n=e.querySelector(".js-comment-button-placeholder");if(n==null?void 0:n.parentElement){const s=document.querySelector(".js-comment-button-template");if(!s)throw new Error("missing js-comment-button-template template element!");const o=n.dataset;if(!o)throw new Error("placeholder element has no dataset");o.originalLine=((t=e.querySelector(".blob-code-inner"))==null?void 0:t.textContent)||"";const i=new W.R(s,o);if(n.parentElement.replaceChild(i,n),o.expandedDiff){const c=e.querySelector(".js-add-line-comment");c&&c.setAttribute("data-expanded-diff",o.expandedDiff)}}}r(bn,"ensureCommentButton");function Ne(e,t){const n=e.parentElement;!n||(bn(n),yn(n,e,t))}r(Ne,"onHover");function yn(e,t,n){const s=e.children;let o;if(s.length===4)for(let i=0,c=s.length;i<c;i++)s[i]===t&&(o=vt(i));for(let i=0,c=s.length;i<c;i++){const m=s[i];(o==null||vt(i)===o)&&m.classList.toggle("is-hovered",n)}}r(yn,"updateIsHoveredClasses"),(0,l.N7)(".diff-table",function(e){let t=null;function n(){t&&Ne(t,!1),t=null}r(n,"onMouseEnter");function s(c){t&&Ne(t,!1),c.target instanceof HTMLElement&&(t=c.target.closest("td.blob-code"),t&&Ne(t,!0))}r(s,"onMouseOver");function o(){e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",n),e.addEventListener("mouseover",s)}r(o,"add");function i(){e.removeEventListener("mouseenter",n),e.removeEventListener("mouseleave",n),e.removeEventListener("mouseover",s)}return r(i,"remove"),{add:o,remove:i}});function St(e){var t;const n=document.getSelection();if(n){const s=new _e(n);s.isSideProtected()&&((t=e.clipboardData)==null||t.setData("text/plain",s.contentToString()),e.preventDefault())}}r(St,"copySidedContent");function jt(e){const t=document.getSelection(),n=e.button===2;if(t&&!n){const s=new _e(t);s.isSideProtected()&&(s.clearSelectedText(),s.clearSideProtection())}}r(jt,"clearSidedProtection");function wt(){const e=document.getSelection();if(e){const t=new _e(e);t.canBeSideProtected()?t.applySideProtection():t.clearSideProtection()}}r(wt,"protectSidedContent"),(0,l.N7)(".js-diff-container",function(){function e(){document.addEventListener("copy",St),document.addEventListener("mousedown",jt),document.addEventListener("selectionchange",wt)}r(e,"add");function t(){document.removeEventListener("copy",St),document.removeEventListener("mousedown",jt),document.removeEventListener("selectionchange",wt)}return r(t,"remove"),{add:e,remove:t}});var Cn=d(94673);function be(){const e=document.querySelector("meta[name=diff-view]"),t=e&&e instanceof HTMLMetaElement?e.content:"",n=document.querySelector(".js-file-diff-split"),s=!!(t==="split"&&n||document.querySelector(".wants-full-width-container"));document.body.classList.toggle("full-width",s)}r(be,"syncBodyClass"),(0,l.N7)("meta[name=diff-view]",{add:be,remove:be}),(0,l.N7)(".js-file-diff-split",{add:be,remove:be}),(0,l.N7)(".js-compare-tab.selected",{add:be,remove:be}),(0,l.N7)(".wants-full-width-container",{add:be,remove:be}),(0,f.on)("change",".js-toggle-file-notes",function(e){const t=e.currentTarget;t.closest(".file").classList.toggle("show-inline-notes",t.checked)});function Lt(e){const t=e.some(n=>n.checked);for(const n of e)(0,ne.Se)(n,!t)}r(Lt,"toggleCheckboxes"),(0,f.on)("click",".js-toggle-all-file-notes",function(e){const t=Array.from(document.querySelectorAll(".js-toggle-file-notes"));Lt(t),e.preventDefault()}),(0,f.on)("click",".js-toggle-all-file-annotations",function(e){const t=Array.from(document.querySelectorAll(".js-toggle-file-check-annotations"));Lt(t),e.preventDefault()}),(0,l.N7)(".js-inline-comments-container",function(e){let t;const n=e.closest(".file");if(n)return{add:t=r(function(){const o=n.querySelector(".js-inline-comments-container")!=null;n.classList.toggle("has-inline-notes",o)},"remove"),remove:t}}),(0,f.on)("change",".js-toggle-file-check-annotations",function(e){const t=e.currentTarget,n=t.closest(".file").querySelectorAll(".js-inline-annotations");for(const s of n)s instanceof HTMLElement&&(s.hidden=!t.checked)});var vn=Object.defineProperty,Sn=Object.getOwnPropertyDescriptor,ye=r((e,t,n,s)=>{for(var o=s>1?void 0:s?Sn(t,n):t,i=e.length-1,c;i>=0;i--)(c=e[i])&&(o=(s?c(t,n,o):c(o))||o);return s&&o&&vn(t,n,o),o},"diff_file_filter_element_decorateClass");let he=r(class extends HTMLElement{connectedCallback(){this.filterState={hideDeletedFiles:!1,hideViewedFiles:!1,showManifestFilesOnly:!1,selectedOwners:[],showCodeownersFiles:!1,selectedFileTypes:[],fileTypeFilterActive:!1,filtersActive:!1}}applyFilter(e){this.filterState=e.detail,this.showResetFilters(),this.filterFiles(),this.filterTreeFiles(),this.hideEmptyDirectories(),this.showBlankslateIfEmpty()}filterFiles(){for(const e of this.diffEntries){const t=e.closest(".js-file.js-details-container");t.hidden=!this.shouldShowFile(e)}}filterTreeFiles(){for(const e of this.treeEntries){const t=this.shouldShowFile(e);e.hidden=!t,e.toggleAttribute("data-skip-substring-filter",!t)}}hideEmptyDirectories(){this.treeRoot&&this.hideEmptyDirectory(this.treeRoot)}hideEmptyDirectory(e){const t=e.getAttribute("data-tree-entry-type")==="root",n=e.getAttribute("data-tree-entry-type")==="directory";if(t||n){const s=e.querySelectorAll(t?":scope > .js-tree-node":":scope > ul > .js-tree-node");let o=0;for(const i of s)o=o+this.hideEmptyDirectory(i);return o===0?(e.hidden=!0,0):(e.hidden=!1,1)}return e.hidden?0:1}async refilterAfterAsyncLoad(){await Promise.resolve(),this.refilterLoadedFiles(),this.showBlankslateIfEmpty()}refilterLoadedFiles(){this.filterState.filtersActive&&this.filterFiles()}shouldShowFile(e){let t=!0;const n=e.getAttribute("data-file-type");return n&&(t=this.filterState.selectedFileTypes.includes(n)),this.filterState.hideViewedFiles&&t&&e.hasAttribute("data-file-user-viewed")&&(t=!1),this.filterState.showCodeownersFiles&&t&&(t=(e.getAttribute("data-codeowners")||"").split(",").filter(o=>this.filterState.selectedOwners.includes(o)).length>0),this.filterState.hideDeletedFiles&&t&&e.getAttribute("data-file-deleted")==="true"&&(t=!1),this.filterState.showManifestFilesOnly&&t&&(e.hasAttribute("data-file-manifest")||(t=!1)),t}showResetFilters(){this.resetFilters&&(this.resetFilters.hidden=!this.filterState.filtersActive)}showBlankslateIfEmpty(){if(!this.blankslate)return;if(this.progressiveLoaders.length>0){this.blankslate.hidden=!0;return}if(this.diffEntries.length===0){this.blankslate.hidden=!0;return}const e=Array.from(this.diffEntries).some(t=>!t.hidden);this.blankslate.hidden=e}},"DiffFileFilterElement");ye([te.fA],he.prototype,"blankslate",2),ye([te.fA],he.prototype,"resetFilters",2),ye([te.GO],he.prototype,"diffEntries",2),ye([te.GO],he.prototype,"progressiveLoaders",2),ye([te.GO],he.prototype,"treeEntries",2),ye([te.fA],he.prototype,"treeRoot",2),ye([(0,at.D)(20)],he.prototype,"hideEmptyDirectories",1),he=ye([te.Ih],he);var jn=d(51374),wn=Object.defineProperty,Ln=Object.getOwnPropertyDescriptor,An=r((e,t,n,s)=>{for(var o=s>1?void 0:s?Ln(t,n):t,i=e.length-1,c;i>=0;i--)(c=e[i])&&(o=(s?c(t,n,o):c(o))||o);return s&&o&&wn(t,n,o),o},"input_demux_context_wrapper_decorateClass");class At{onItemSelected(t){if(!(t.currentTarget instanceof HTMLButtonElement))return;const n=t.currentTarget.querySelector(".js-ref-name").textContent,s=document.querySelector(".js-new-base-branch");s.value=btoa(n||"");const o=document.querySelector(".js-change-base-template").content.cloneNode(!0);o instanceof DocumentFragment&&(0,jn.W)({content:o})}}r(At,"InputDemuxBaseChangeContext");let Et=r(class extends HTMLElement{connectedCallback(){const e=this.getAttribute("data-context-type"),t={baseChange:new At};this.context=t[e]}onItemSelected(e){this.context.onItemSelected(e)}},"InputDemuxContextWrapperElement");Et=An([te.Ih],Et);var xn=d(9115),qn=d(68906),Mn=d(63355)},79046:(Z,N,d)=>{d.d(N,{O4:()=>I,jo:()=>k,Qp:()=>b});var f=d(70130),T=d(59753);const E="ontransitionend"in window;function R(S,M){if(!E){M();return}const H=Array.from(S.querySelectorAll(".js-transitionable"));S.classList.contains("js-transitionable")&&H.push(S);for(const D of H){const ee=w(D);D instanceof HTMLElement&&(D.addEventListener("transitionend",()=>{D.style.display="",D.style.visibility="",ee&&l(D,function(){D.style.height=""})},{once:!0}),D.style.boxSizing="content-box",D.style.display="block",D.style.visibility="visible",ee&&l(D,function(){D.style.height=getComputedStyle(D).height}),D.offsetHeight)}M();for(const D of H)if(D instanceof HTMLElement&&w(D)){const ee=getComputedStyle(D).height;D.style.boxSizing="",ee==="0px"?D.style.height=`${D.scrollHeight}px`:D.style.height="0px"}}r(R,"performTransition");function w(S){return getComputedStyle(S).transitionProperty==="height"}r(w,"isTransitioningHeight");function l(S,M){S.style.transition="none",M(),S.offsetHeight,S.style.transition=""}r(l,"withoutTransition");var p=d(96776);function y(S,M){M.find(H=>{const D=S.querySelectorAll(H),ee=D[D.length-1];if(ee&&document.activeElement!==ee)return ee.focus(),!0})}r(y,"findAndFocusByQuerySelector");function a(S){y(S,[".js-focus-on-dismiss","input[autofocus], textarea[autofocus]"])}r(a,"restoreAutofocus");function u(S){!S.classList.contains("tooltipped")||(S.classList.remove("tooltipped"),S.addEventListener("mouseleave",()=>{S.classList.add("tooltipped"),S.blur()},{once:!0}))}r(u,"hideTooltip");function L(S){return[...document.querySelectorAll(".js-details-container")].filter(M=>M.getAttribute("data-details-container-group")===S)}r(L,"groupMembers");function A(S){return[...S.querySelectorAll(".js-details-target")].filter(M=>M.closest(".js-details-container")===S)}r(A,"containerTargets");function _(S,M){const H=S.getAttribute("data-details-container-group");return H?((0,p.uQ)(S,()=>{for(const D of L(H))D!==S&&j(D,M)}),H):null}r(_,"toggleGroup");function j(S,M){S.classList.toggle("open",M),S.classList.toggle("Details--on",M);for(const H of A(S))H.setAttribute("aria-expanded",M.toString())}r(j,"updateOpenState");function b(S,M){var H,D;const ee=S.getAttribute("data-details-container")||".js-details-container",se=S.closest(ee),oe=(H=M==null?void 0:M.force)!=null?H:!se.classList.contains("open"),ue=(D=M==null?void 0:M.withGroup)!=null?D:!1;R(se,()=>{j(se,oe);const v=ue?_(se,oe):null;Promise.resolve().then(()=>{a(se),u(S),se.dispatchEvent(new CustomEvent("details:toggled",{bubbles:!0,cancelable:!1,detail:{open:oe}})),v&&se.dispatchEvent(new CustomEvent("details:toggled-group",{bubbles:!0,cancelable:!1,detail:{open:oe,group:v}}))})})}r(b,"toggleDetailsTarget");function k(S){const M=S.getAttribute("data-details-container")||".js-details-container",D=S.closest(M).classList;return D.contains("Details--on")||D.contains("open")}r(k,"isDetailsTargetExpanded");function q(S){const M=S.altKey,H=S.currentTarget;b(H,{withGroup:M}),S.preventDefault()}r(q,"handleDetailsTargetClick"),(0,T.on)("click",".js-details-target",q),(0,f.Z)(function({target:S}){S&&I(S)});function I(S){let M=!1,H=S.parentElement;for(;H;)H.classList.contains("Details-content--shown")&&(M=!0),H.classList.contains("js-details-container")&&(H.classList.toggle("open",!M),H.classList.toggle("Details--on",!M),M=!1),H=H.parentElement}r(I,"ensureExpanded")},70130:(Z,N,d)=>{d.d(N,{Z:()=>R});var f=d(34782);const T=[];let E=0;function R(a){(async function(){T.push(a),await f.x,w()})()}r(R,"hashChange"),R.clear=()=>{T.length=E=0};function w(){const a=E;E=T.length,l(T.slice(a),null,window.location.href)}r(w,"runRemainingHandlers");function l(a,u,L){const A=window.location.hash.slice(1),_=A?document.getElementById(A):null,j={oldURL:u,newURL:L,target:_};for(const b of a)b.call(null,j)}r(l,"runHandlers");let p=window.location.href;window.addEventListener("popstate",function(){p=window.location.href}),window.addEventListener("hashchange",function(a){const u=window.location.href;try{l(T,a.oldURL||p,u)}finally{p=u}});let y=null;document.addEventListener("pjax:start",function(){y=window.location.href}),document.addEventListener("pjax:end",function(){l(T,y,window.location.href)})},42474:(Z,N,d)=>{d.d(N,{h:()=>T});var f=d(59753);(0,f.on)("click",".js-skip-to-content",function(y){const a=document.getElementById("start-of-content");if(a){const u=a.nextElementSibling;u instanceof HTMLElement&&(u.setAttribute("tabindex","-1"),u.setAttribute("data-skipped-to-content","1"),u.focus())}y.preventDefault()});function T(){let y=!1;const a=document.getElementById("start-of-content");if(a){const u=a.nextElementSibling;if(u instanceof HTMLElement)return y=u.getAttribute("data-skipped-to-content")==="1",y&&u.removeAttribute("data-skipped-to-content"),y}}r(T,"hasSkippedToContent");const E="ontouchstart"in document;function R(){return window.innerWidth>1012}r(R,"compatibleDesktop");for(const y of document.querySelectorAll(".HeaderMenu-details"))y.addEventListener("toggle",l),E||(y.addEventListener("mouseover",p),y.addEventListener("mouseleave",p));let w=!1;function l(y){if(!w){w=!0;for(const a of document.querySelectorAll(".HeaderMenu-details"))a!==y.currentTarget&&a.removeAttribute("open");setTimeout(()=>w=!1)}}r(l,"onMenuToggle");function p(y){const{currentTarget:a}=y;!(a instanceof HTMLElement)||!R()||(y.type==="mouseover"&&y instanceof MouseEvent?y.target instanceof Node&&y.relatedTarget instanceof Node&&a.contains(y.target)&&!a.contains(y.relatedTarget)&&a.setAttribute("open",""):a.removeAttribute("open"))}r(p,"onMenuHover")},17364:(Z,N,d)=>{d.d(N,{$:()=>y,G:()=>p});var f=d(86404),T=d(64463),E=d(59753);(0,T.N7)("include-fragment, poll-include-fragment",{subscribe:u=>(0,f.qC)((0,f.RB)(u,"error",l),(0,f.RB)(u,"loadstart",w))}),(0,E.on)("click","include-fragment button[data-retry-button]",({currentTarget:u})=>{const L=u.closest("include-fragment"),A=L.src;L.src="",L.src=A});function R(u,L){const A=u.currentTarget;if(A instanceof Element){for(const _ of A.querySelectorAll("[data-show-on-error]"))_ instanceof HTMLElement&&(_.hidden=!L);for(const _ of A.querySelectorAll("[data-hide-on-error]"))_ instanceof HTMLElement&&(_.hidden=L)}}r(R,"toggleElements");function w(u){R(u,!1)}r(w,"onLoad");function l(u){R(u,!0)}r(l,"onError");function p({currentTarget:u}){u instanceof Element&&y(u)}r(p,"loadDeferredContentByEvent");function y(u){const L=u.closest("details");L&&a(L)}r(y,"loadDeferredContent");function a(u){const L=u.getAttribute("data-deferred-details-content-url");if(L){u.removeAttribute("data-deferred-details-content-url");const A=u.querySelector("include-fragment, poll-include-fragment");A&&(A.src=L)}}r(a,"setIncludeFragmentSrc")},95140:(Z,N,d)=>{d.d(N,{j:()=>R,w:()=>w});var f=d(59753),T=d(78694),E=d(84570);(0,f.on)("click",".js-toggle-inline-comment-form",function(l){const p=l.currentTarget.closest(".js-line-comments");R(p)}),(0,f.on)("quote-selection",".js-line-comments",function(l){R(l.currentTarget),l.stopPropagation()}),(0,E.w4)("keydown",".js-inline-comment-form-container form .js-comment-field",function(l){const p=l.target;if(!p.classList.contains("js-navigation-enable")&&l.key==="Escape"&&p.value.length===0){const y=p.closest("form");w(y),l.preventDefault()}}),(0,f.on)("click",".js-hide-inline-comment-form",function(l){const p=l.currentTarget.closest("form");!(0,T.T)(p)||confirm(l.target.getAttribute("data-confirm-cancel-text"))?w(p):l.preventDefault()});function R(l){var p;const y=l.querySelector(".js-inline-comment-form-container");y.classList.add("open"),(p=y.querySelector(".js-write-tab"))==null||p.click(),y.querySelector(".js-comment-field").focus(),(0,f.f)(y,"inlinecomment:focus")}r(R,"focusForm");function w(l){l.reset();const p=l.closest(".js-inline-comment-form-container");p.classList.remove("open");const y=p.querySelector(".js-multi-line-preview");y&&(y.hidden=!0),(0,f.f)(p,"inlinecomment:collapse")}r(w,"blurForm")},54235:(Z,N,d)=>{d.d(N,{H:()=>u});var f=d(42474),T=d(34782),E=d(64463);let R=!1,w=0;const l=[];function p(){l.length?y():a()}r(p,"manageObservers");function y(){R||(window.addEventListener("resize",L),document.addEventListener("scroll",L),R=!0)}r(y,"addObservers");function a(){window.removeEventListener("resize",L),document.removeEventListener("scroll",L),R=!1}r(a,"removeObservers");function u(){A(!0)}r(u,"forceStickyRelayout");function L(){A()}r(L,"checkElementsForStickingHandler");function A(v=!1){for(const O of l)if(O.element.offsetHeight>0){const{element:W,placeholder:ne,top:g}=O,h=W.getBoundingClientRect();if(ne){const C=ne.getBoundingClientRect();W.classList.contains("is-stuck")?C.top>oe(W,g)?b(O):k(O):h.top<=oe(W,g)?j(O):v&&k(O)}else h.top-oe(W,g)<.1?j(O):b(O)}}r(A,"checkElementsForSticking");function _(v){const{position:O}=window.getComputedStyle(v);return/sticky/.test(O)}r(_,"browserHasSticky");function j({element:v,placeholder:O,top:W}){if(O){const ne=v.getBoundingClientRect();ue(v,oe(v,W)),v.style.left=`${ne.left}px`,v.style.width=`${ne.width}px`,v.style.marginTop="0",v.style.position="fixed",O.style.display="block"}v.classList.add("is-stuck")}r(j,"pinSet");function b({element:v,placeholder:O}){O&&(v.style.position="static",v.style.marginTop=O.style.marginTop,O.style.display="none"),v.classList.remove("is-stuck")}r(b,"unpinSet");function k({element:v,placeholder:O,offsetParent:W,top:ne}){if(O&&!(0,f.h)()){const g=v.getBoundingClientRect(),h=O.getBoundingClientRect();if(ue(v,oe(v,ne)),v.style.left=`${h.left}px`,v.style.width=`${h.width}px`,W){const C=W.getBoundingClientRect();C.bottom<g.height+parseInt(String(ne))&&(v.style.top=`${C.bottom-g.height}px`)}}}r(k,"updatePinnedSet");function q(v){if(_(v))return null;const O=v.previousElementSibling;if(O&&O.classList.contains("is-placeholder"))return O;const W=document.createElement("div");return W.style.visibility="hidden",W.style.display="none",W.style.height=window.getComputedStyle(v).height,W.className=v.className,W.classList.remove("js-sticky"),W.classList.add("is-placeholder"),v.parentNode.insertBefore(W,v)}r(q,"findOrCreatePlaceholder");function I(v){const O=q(v),W=window.getComputedStyle(v).position;v.style.position="static";const ne=v.offsetParent;v.style.position="fixed";const g=se(v),h={element:v,placeholder:O,offsetParent:ne,top:g==="auto"?0:parseInt(g||"0")};v.style.position=W,l.push(h)}r(I,"createSet");function S(v){const O=l.map(W=>W.element).indexOf(v);l.splice(O,1)}r(S,"removeSet");async function M(v){await T.C,I(v),A(),p()}r(M,"initializeSet"),(0,E.N7)(".js-sticky",{constructor:HTMLElement,add(v){M(v)},remove(v){S(v),p()}}),(0,E.N7)(".js-notification-top-shelf",{constructor:HTMLElement,add(v){H(v)},remove(){for(const v of document.querySelectorAll(".js-notification-top-shelf"))v.remove();w>0&&(w=0,D(),u())}}),(0,E.N7)(".js-notification-shelf-offset-top, .js-position-sticky",{constructor:HTMLElement,add:ee});async function H(v){if(v.offsetParent===null)return;await T.C;const O=Math.floor(v.getBoundingClientRect().height);O>0&&(w=O,D(),u())}r(H,"initializeNotificationShelf");function D(){for(const v of document.querySelectorAll(".js-position-sticky, .js-notification-shelf-offset-top"))ee(v)}r(D,"updateTopOffsets");function ee(v){if(v.classList.contains("js-notification-top-shelf"))return;const O=parseInt(se(v))||0;ue(v,O+w)}r(ee,"updateTopOffset");function se(v){const O=v.getAttribute("data-original-top");if(O!=null)return O;const W=window.getComputedStyle(v).top;return v.setAttribute("data-original-top",W),W}r(se,"getOriginalTop");function oe(v,O){return v.classList.contains("js-notification-top-shelf")?O:O+w}r(oe,"withShelfOffset");function ue(v,O){v.style.setProperty("top",`${O}px`,"important")}r(ue,"setTopImportant")},51374:(Z,N,d)=>{d.d(N,{W:()=>T});var f=d(59753);async function T(E){const w=document.querySelector("#site-details-dialog").content.cloneNode(!0),l=w.querySelector("details"),p=l.querySelector("details-dialog"),y=l.querySelector(".js-details-dialog-spinner");E.detailsClass&&l.classList.add(...E.detailsClass.split(" ")),E.dialogClass&&p.classList.add(...E.dialogClass.split(" ")),E.label?p.setAttribute("aria-label",E.label):E.labelledBy&&p.setAttribute("aria-labelledby",E.labelledBy),document.body.append(w);const a=await E.content;return y.remove(),p.prepend(a),l.addEventListener("toggle",()=>{l.hasAttribute("open")||((0,f.f)(p,"dialog:remove"),l.remove())}),p}r(T,"dialog")},96310:(Z,N,d)=>{d.d(N,{X:()=>T});var f=d(40728);function T(E,R,w,l,p,y,a,u){const L=document.querySelector(".js-file-filter"),A=new URL(window.location.href,window.location.origin);if(!E&&!l)return R||y?void 0:(A.search="",(0,f.lO)((0,f.y0)(),"",A.toString()));const _=L.querySelector(".js-file-filter-form"),j=new FormData(_),b=w.filter(I=>!j.getAll("file-filters[]").includes(I)),k=p.filter(I=>!j.getAll("owned-by[]").includes(I));for(const I of b)j.append("file-filters[]",I);for(const I of k)j.append("owned-by[]",I);const q=new URLSearchParams(j);(!q.has("file-filters[]")||q.toString()==="")&&q.set("file-filters[]",""),R&&q.set("w","1"),y&&q.set("manifests","true"),a&&q.set("show-deleted-files","false"),u&&q.set("show-viewed-files","false"),q.delete("authenticity_token"),A.search=q.toString(),(0,f.lO)((0,f.y0)(),"",A.toString())}r(T,"updateURLState")},97105:(Z,N,d)=>{d.d(N,{s:()=>f});function f(T){const E=T.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(E!=null&&E.length===6)return E;const R=T.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return R!=null&&R.length===6?R:null}r(f,"matchHash")},70497:(Z,N,d)=>{d.d(N,{MO:()=>q,vu:()=>_,Oz:()=>b});var f=d(14037);class T{constructor(h,C,B){this.diffId=h,this.side=C,this.lineNumber=B,this.element=(0,f.Q)(document,this.anchor())}sideForCommenting(){return this.element&&this.element.classList.contains("blob-num-context")?"right":{R:"right",L:"left"}[this.side]}isContext(){return this.element?this.element.classList.contains("blob-num-context"):!1}anchor(){return`${this.diffId}${this.anchorSuffix()}`}anchorSuffix(){return`${this.side}${this.lineNumber}`}is(h){return this.diffId===h.diffId&&this.side===h.side&&this.lineNumber===h.lineNumber}}r(T,"DiffPosition");class E{constructor(h,C,B,Q,z){this.elements=new Set,this.isParsed=!1,this.isSplit=!1,this._rows=new Set,this._isAcrossHunks=!1,this._isContextOnly=!0,this._includesExpandedLine=!1,this._commentOutsideTheDiff=!1,this.diffId=h,this.diffTable=document.querySelector(`.js-diff-table[data-diff-anchor="${h}"]`),this.diffTable&&(this.isSplit=this.diffTable.classList.contains("js-file-diff-split")),this.start=new T(h,C,B),this.end=new T(h,Q,z),this.lineCount=0,this.parse()}anchor(){const h=[];return h.push(this.start.anchor()),this.start.is(this.end)||h.push(this.end.anchorSuffix()),h.join("-")}parse(){if(!this.diffTable)return;let h=this.unify(this.diffTable.querySelectorAll(".js-linkable-line-number"));h=this.filterInRange(h),this.lineCount=h.length,this.elements=this.expandRelatedElements(h),this._commentOutsideTheDiff=this.diffTable.classList.contains("js-comment-outside-the-diff"),this.isParsed=!0}unify(h){if(!this.isSplit)return Array.from(h);const C=[];let B=[],Q=[];for(const z of h)z.classList.contains("blob-num-addition")?B.push(z):z.classList.contains("blob-num-deletion")?Q.push(z):(C.push(...Q,...B,z),B=[],Q=[]);return C.push(...Q,...B),C}filterInRange(h){if(!this.start.element||!this.end.element)return[];let C=h.indexOf(this.start.element),B=h.indexOf(this.end.element);if(C>B){[C,B]=[B,C];const[Q,z]=[this.end,this.start];this.start=Q,this.end=z}return h.slice(C,B+1)}isContextOnly(){return this.isParsed||this.parse(),this._isContextOnly}isAcrossHunks(){return this.isParsed||this.parse(),this._isAcrossHunks}includesExpandedLine(){return this.isParsed||this.parse(),this._includesExpandedLine}commentOutsideTheDiffEnabled(){return this.isParsed||this.parse(),this._commentOutsideTheDiff}rows(){return this.isParsed||this.parse(),this._rows}expandRelatedElements(h){const C=this.isSplit,B=h[0],Q=h[h.length-1];if(B&&Q){const X=B.closest("[data-hunk]"),K=Q.closest("[data-hunk]");if(X&&K){const G=X.getAttribute("data-hunk"),ce=K.getAttribute("data-hunk");G!==ce&&(this._isAcrossHunks=!0)}}const z=r((X,K)=>{!this._includesExpandedLine&&K.closest(".blob-expanded")&&(this._includesExpandedLine=!0);const G=K.parentElement;G instanceof HTMLElement&&this._rows.add(G);const ce=K.classList.contains("blob-num-deletion")||K.classList.contains("blob-num-addition");if(ce&&(this._isContextOnly=!1),!G)return X;if(C&&ce)return Array.from(G.children).indexOf(K)<2?X.add(G.children[0]).add(G.children[1]):X.add(G.children[2]).add(G.children[3]);for(const ge of Array.from(G.children))X.add(ge);return X},"expander");return h.reduce(z,new Set)}}r(E,"DiffRange");var R=d(70130),w=d(97105),l=d(64463),p=d(59753),y=d(81654);let a=null,u=null,L=!1,A=null;function _(){return a}r(_,"getCurrentRange");function j(g){return!!g.closest(".js-multi-line-comments-enabled")}r(j,"isMultiLineCommentingEnabled");function b(g,h){if(!j(g))return!1;const{start:{lineNumber:C},end:{lineNumber:B}}=h;return!(C===B&&h.isContextOnly()||!h.commentOutsideTheDiffEnabled()&&(h.isAcrossHunks()||h.includesExpandedLine()))}r(b,"isMultiLineCommentAllowed");function k(g){return g.closest(".js-diff-table").classList.contains("is-selecting")}r(k,"isSelecting");function q(){window.history.replaceState(null,"","#"),W()}r(q,"clearSelection");function I(g,h){let C=g.id;if(h){const B=(0,w.s)(C);if(!B)return;const Q=B[1],z=B[2],X=B[3];if(a&&a.diffId===Q){if(z===a.start.side&&X<a.start.lineNumber)return;const K=new E(Q,a.start.side,a.start.lineNumber,z,+X);C=K.anchor();const G=g.closest(".js-file-content[data-hydro-view]");G instanceof HTMLElement&&ne(G,K),L&&k(g)&&g.closest(".js-diff-table").classList.toggle("is-commenting",b(g,K)),u=r(function(){if(b(g,K)){const ge=`.js-add-line-comment[data-side="${K.end.sideForCommenting()}"]`,Le=g.closest("tr").querySelector(ge);Le&&K&&Le.click()}},"showMultiLineCommentForm")}}window.history.replaceState(null,null,`#${C}`),W()}r(I,"setSelection");function S(g){if(!(g instanceof HTMLElement))return null;if(g.classList.contains("js-linkable-line-number"))return g;const h=g.previousElementSibling;return h?S(h):null}r(S,"nearestLinkableLineNumber");function M(g){!a||g.target.closest(".js-diff-table")||(window.history.replaceState(null,null,"#"),W())}r(M,"handleClick");function H(){if(!A)return;I(A,!1);const g=A.closest(".js-diff-table");A=null,g.classList.add("is-selecting"),g.classList.add("is-commenting"),document.addEventListener("mouseup",function(h){g.classList.remove("is-selecting"),g.classList.remove("is-selecting","is-commenting"),u&&u(),u=null,ue(g),h.preventDefault()},{once:!0})}r(H,"beginDrag");function D(g){const h=S(g);!h||!k(h)||I(h,!0)}r(D,"commentSelectionMouseverToCode");function ee(g){!k(g)||I(g,!0)}r(ee,"commentSelectionMouseverToLineNumbers");function se(g){const h=g.target;if(!(h instanceof Element))return;A&&H();const C=h.closest(".blob-code, .js-linkable-line-number");if(!!C){if(C.classList.contains("blob-code"))return D(C);C.classList.contains("js-linkable-line-number")&&ee(C)}}r(se,"handleDragMouseEvent");function oe(g){g.addEventListener("mouseenter",se,{capture:!0})}r(oe,"addCommentSelectionEvents");function ue(g){L=!1,g.removeEventListener("mouseenter",se,{capture:!0}),setTimeout(()=>{document.addEventListener("click",M,{once:!0})},0)}r(ue,"removeCommentSelectionEvents"),(0,p.on)("mousedown",".js-add-line-comment",function(g){if(!(g instanceof MouseEvent)||g.button!==0)return;const h=g.target.parentElement;if(!h||!j(g.target))return;const C=S(h);if(!C)return;const B=g.target.closest(".js-diff-table");oe(B),A=C,L=!0,g.target.addEventListener("mouseup",function(){ue(B),A=null,L=!1},{once:!0}),a&&a.lineCount>1&&g.preventDefault()}),(0,p.on)("mousedown",".js-linkable-line-number",function(g){if(!(g instanceof MouseEvent)||g.button!==0)return;const h=g.target;if(!(h instanceof Element))return;const C=h.closest(".js-diff-table");C.classList.add("is-selecting"),oe(C),document.addEventListener("mouseup",function(){h.closest(".js-diff-table").classList.remove("is-selecting"),ue(C)},{once:!0}),I(h,g instanceof MouseEvent&&g.shiftKey),g.preventDefault()});function v(){if(!a)return;for(const z of a.elements)z.classList.add("selected-line");const g=[],h=[],C=[],B=[];for(const z of a.rows()){const[X,K,G,ce]=z.children;g.push(X),h.push(K),C.push(G),B.push(ce)}function Q(z){for(const[X,K]of z.entries()){if(K.classList.contains("empty-cell"))continue;const G=z[X-1];(!G||!G.classList.contains("selected-line"))&&K.classList.add("selected-line-top");const ce=z[X+1];(!ce||!ce.classList.contains("selected-line"))&&K.classList.add("selected-line-bottom")}}r(Q,"doBorder"),Q(g),Q(h),Q(C),Q(B);for(const[z,X]of h.entries())B[z].classList.contains("selected-line")||X.classList.add("selected-line-right");for(const[z,X]of C.entries())h[z].classList.contains("selected-line")||X.classList.add("selected-line-left")}r(v,"drawBorderForSplit");function O(){if(!a)return;for(const B of a.elements)B.classList.add("selected-line");const g=Array.from(a.rows()),h=g[0];for(const B of h.children)B.classList.add("selected-line-top");const C=g[g.length-1];for(const B of C.children)B.classList.add("selected-line-bottom")}r(O,"drawBorderForUnified");function W(){if(a){for(const G of a.elements)G.classList.remove("selected-line","selected-line-top","selected-line-bottom","selected-line-left","selected-line-right");a=null}const g=(0,w.s)(window.location.hash);if(!g)return;const h=g[1],C=g[2],B=g[3],Q=g[4]||C,z=g[5]||B;a=new E(h,C,+B,Q,+z);const K=Array.from(a.elements)[0];!K||(K.closest(".js-diff-table").classList.contains("file-diff-split")?v():O())}r(W,"showHighlight");function ne(g,h){const C={starting_diff_position:h.start.side+h.start.lineNumber,ending_diff_position:h.end.side+h.end.lineNumber,line_count:h.lineCount};g.setAttribute("data-hydro-client-context",JSON.stringify(C)),(0,y.Fk)(g)}r(ne,"sendHydroEvent"),(0,R.Z)(W),(0,l.N7)(".blob-expanded",W),(0,l.N7)(".js-diff-progressive-loader",function(g){g.addEventListener("load",W)}),(0,l.N7)(".js-diff-entry-loader",function(g){g.addEventListener("load",W)})},94673:(Z,N,d)=>{var f=d(59753);(0,f.on)("click",".js-rich-diff.collapsed .js-expandable",function(T){if(!(T.target instanceof Element))return;T.preventDefault(),T.target.closest(".js-rich-diff").classList.remove("collapsed")}),(0,f.on)("click",".js-show-rich-diff",function(T){const E=T.currentTarget.closest(".js-warn-no-visible-changes");if(!E)return;E.classList.add("d-none");const w=E.parentElement.querySelector(".js-no-rich-changes");w&&w.classList.remove("d-none")})},78694:(Z,N,d)=>{d.d(N,{M:()=>E,T:()=>R});var f=d(14840),T=d(82036);function E(b,k=!1){return R(b)||u(b,k)||_(b)||j(b)}r(E,"hasInteractions");function R(b){for(const k of b.querySelectorAll("input, textarea"))if((k instanceof HTMLInputElement||k instanceof HTMLTextAreaElement)&&w(k))return!0;return!1}r(R,"hasDirtyFields");function w(b){if(b instanceof HTMLInputElement&&(b.type==="checkbox"||b.type==="radio")){if(b.checked!==b.defaultChecked)return!0}else if(b.value!==b.defaultValue)return!0;return!1}r(w,"formFieldValueChanged");let l;async function p(b,k){l=b;try{await k()}finally{l=null}}r(p,"withActiveElement");function y(b){return l instanceof Element?l:b&&b.ownerDocument&&b.ownerDocument.activeElement?b.ownerDocument.activeElement:null}r(y,"getActiveElement");let a;document.addEventListener("mouseup",function(b){a=b.target});function u(b,k){const q=y(b);return q===null||k&&q===b?!1:q===b&&(0,T.sw)(q)||b.contains(q)&&!A(q)?!0:a instanceof Element&&b.contains(a)&&!!a.closest("details[open] > summary")}r(u,"hasFocus");const L="a[href], button";function A(b){var k;if(b instanceof f.Z)return!0;const q=b instanceof HTMLAnchorElement||b instanceof HTMLButtonElement,I=(k=b.parentElement)==null?void 0:k.classList.contains("task-list-item");if(q&&I)return!0;if(!(a instanceof Element))return!1;const S=b.closest(L);if(!S)return!1;const M=a.closest(L);return S===M}r(A,"activeElementIsSafe");function _(b){return b.matches(":active:enabled")}r(_,"hasMousedown");function j(b){return!!(b.closest(".is-dirty")||b.querySelector(".is-dirty"))}r(j,"markedAsDirty")},81654:(Z,N,d)=>{d.d(N,{$S:()=>T,Fk:()=>E,sz:()=>R});var f=d(83476);function T(w,l,p){const y={hydroEventPayload:w,hydroEventHmac:l,visitorPayload:"",visitorHmac:"",hydroClientContext:p},a=document.querySelector("meta[name=visitor-payload]");a instanceof HTMLMetaElement&&(y.visitorPayload=a.content);const u=document.querySelector("meta[name=visitor-hmac]")||"";u instanceof HTMLMetaElement&&(y.visitorHmac=u.content),(0,f.b)(y,!0)}r(T,"sendData");function E(w){const l=w.getAttribute("data-hydro-view")||"",p=w.getAttribute("data-hydro-view-hmac")||"",y=w.getAttribute("data-hydro-client-context")||"";T(l,p,y)}r(E,"trackView");function R(w){const l=w.getAttribute("data-hydro-click-payload")||"",p=w.getAttribute("data-hydro-click-hmac")||"",y=w.getAttribute("data-hydro-client-context")||"";T(l,p,y)}r(R,"sendHydroEvent")},37713:(Z,N,d)=>{d.d(N,{kc:()=>R,lA:()=>w,zT:()=>E});var f=d(14037),T=d(54235);function E(l){const p=l.ownerDocument;setTimeout(()=>{p&&p.defaultView&&(l.scrollIntoView(),p.defaultView.scrollBy(0,-w(p)))},0)}r(E,"scrollIntoView");function R(l){const p=(0,f.Kt)(l);p&&E(p)}r(R,"scrollToFragmentTarget");function w(l){(0,T.H)();const p=l.querySelectorAll(".js-sticky-offset-scroll"),y=l.querySelectorAll(".js-position-sticky"),a=Math.max(0,...Array.from(p).map(A=>{const{top:_,height:j}=A.getBoundingClientRect();return _===0?j:0}))+Math.max(0,...Array.from(y).map(A=>{const{top:_,height:j}=A.getBoundingClientRect(),b=parseInt(getComputedStyle(A).top);if(!A.parentElement)return 0;const k=A.parentElement.getBoundingClientRect().top;return _===b&&k<0?j:0})),u=l.querySelectorAll(".js-position-sticky-stacked"),L=Array.from(u).reduce((A,_)=>{const{height:j,top:b}=_.getBoundingClientRect(),k=b<0,q=_.classList.contains("is-stuck");return A+(!k&&q?j:0)},0);return a+L}r(w,"computeFixedYOffset")},74136:(Z,N,d)=>{d.d(N,{H5:()=>y,Of:()=>L,x0:()=>u,z8:()=>a});var f=d(78694),T=d(64463),E=d(10900),R=d(96776),w=d(40728);const l=new WeakMap,p={};function y(){for(const b of Object.keys(p))delete p[b];const j=history.state||{};j.staleRecords=p,(0,w.lO)(j,"",location.href),window.location.reload()}r(y,"reload");function a(){if(Object.keys(p).length>0){const j=history.state||{};j.staleRecords=p,(0,w.lO)(j,"",location.href)}}r(a,"registerStaleRecords");async function u(j){if(l.get(j))return;const b=j.hasAttribute("data-retain-focus"),k=j.getAttribute("data-url");if(!k)throw new Error("could not get url");const q=new AbortController;l.set(j,q);try{const I=await fetch(k,{signal:q.signal,headers:{Accept:"text/html","X-Requested-With":"XMLHttpRequest"}});if(!I.ok)return;const S=await I.text();if((0,f.M)(j,b)){console.warn("Failed to update content with interactions",j);return}return p[k]=S,A(j,S,b)}catch{}finally{l.delete(j)}}r(u,"updateContent");async function L(j,b,k=!1){const q=l.get(j);q==null||q.abort();const I=j.closest(".js-updatable-content[data-url], .js-updatable-content [data-url]");return!k&&I&&I===j&&(p[I.getAttribute("data-url")||""]=b),A(j,b)}r(L,"replaceContent");function A(j,b,k=!1){return(0,R._8)(document,()=>{const q=(0,E.r)(document,b.trim()),I=k&&j.ownerDocument&&j===j.ownerDocument.activeElement?q.querySelector("*"):null,S=Array.from(j.querySelectorAll("details[open][id]")).map(M=>M.id);j.tagName==="DETAILS"&&j.id&&j.hasAttribute("open")&&S.push(j.id);for(const M of j.querySelectorAll(".js-updatable-content-preserve-scroll-position")){const H=M.getAttribute("data-updatable-content-scroll-position-id")||"";_.set(H,M.scrollTop)}for(const M of S){const H=q.querySelector(`#${M}`);H&&H.setAttribute("open","")}j.replaceWith(q),I instanceof HTMLElement&&I.focus()})}r(A,"replace");const _=new Map;(0,T.N7)(".js-updatable-content-preserve-scroll-position",{constructor:HTMLElement,add(j){const b=j.getAttribute("data-updatable-content-scroll-position-id");if(!b)return;const k=_.get(b);k!=null&&(j.scrollTop=k)}})},12585:(Z,N,d)=>{d.d(N,{Z:()=>T});function f(E){return E.offsetWidth<=0&&E.offsetHeight<=0}r(f,"hidden");function T(E){return!f(E)}r(T,"visible")},96776:(Z,N,d)=>{d.d(N,{_8:()=>f,uQ:()=>T});function f(w,l){return T(E(w),l)}r(f,"preserveAnchorNodePosition");function T(w,l){var p=w;if(!p)return Promise.resolve(l());var y=p.ownerDocument.documentElement;function a(A){for(var _=[];A;){var j=A.getBoundingClientRect(),b=j.top,k=j.left;_.push({element:A,top:b,left:k}),A=A.parentElement}return _}r(a,"computeAncestorBoundingRects");function u(A){for(var _=0;_<A.length;_++){var j=A[_];if(y.contains(j.element))return j}}r(u,"firstAttachedBoundingRect");var L=a(p);return Promise.resolve(l()).then(function(A){var _=u(L);if(_){p=_.element;var j=_.top,b=_.left,k=p.getBoundingClientRect(),q=k.top,I=k.left;R(p,I-b,q-j)}return A})}r(T,"preservePosition");function E(w){if(w.activeElement!==w.body)return w.activeElement;var l=w.querySelectorAll(":hover"),p=l.length;if(p)return l[p-1]}r(E,"findAnchorNode");function R(w,l,p){var y=w.ownerDocument,a=y.defaultView;function u(q){return q.offsetParent?{top:q.scrollTop,left:q.scrollLeft}:{top:a.pageYOffset,left:a.pageXOffset}}r(u,"scrollOffsets");function L(q,I,S){if(I===0&&S===0)return[0,0];var M=u(q),H=M.top+S,D=M.left+I;q===y||q===a||q===y.documentElement||q===y.body?y.defaultView.scrollTo(D,H):(q.scrollTop=H,q.scrollLeft=D);var ee=u(q);return[ee.left-M.left,ee.top-M.top]}r(L,"scrollBy");function A(q){var I=q;if(!(!I.offsetParent||I===y.body)){for(;I!==y.body;){if(I.parentElement)I=I.parentElement;else return;var S=a.getComputedStyle(I),M=S.position,H=S.overflowY,D=S.overflowX;if(M==="fixed"||H==="auto"||D==="auto"||H==="scroll"||D==="scroll")break}return I}}r(A,"overflowParent");for(var _=A(w),j=0,b=0;_;){var k=L(_,l-j,p-b);if(j+=k[0],b+=k[1],j===l&&b===p)break;_=A(_)}}r(R,"cumulativeScrollBy")},27034:(Z,N,d)=>{d.d(N,{Z:()=>y});const f=new WeakMap,T=new IntersectionObserver(a=>{for(const u of a)if(u.isIntersecting){const{target:L}=u;if(T.unobserve(L),!(L instanceof y))return;L.loading==="lazy"&&R(L)}},{rootMargin:"0px 0px 256px 0px",threshold:.01});function E(){return new Promise(a=>setTimeout(a,0))}r(E,"task");async function R(a){return T.unobserve(a),w(a).then(function(u){const L=document.createElement("template");L.innerHTML=u;const A=document.importNode(L.content,!0);!a.dispatchEvent(new CustomEvent("include-fragment-replace",{cancelable:!0,detail:{fragment:A}}))||(a.replaceWith(A),a.dispatchEvent(new CustomEvent("include-fragment-replaced")))},function(){a.classList.add("is-error")})}r(R,"handleData");function w(a){const u=a.src;let L=f.get(a);return L&&L.src===u?L.data:(u?L=l(a):L=Promise.reject(new Error("missing src")),f.set(a,{src:u,data:L}),L)}r(w,"getData");function l(a){return E().then(()=>(a.dispatchEvent(new Event("loadstart")),a.fetch(a.request()))).then(u=>{if(u.status!==200)throw new Error(`Failed to load resource: the server responded with a status of ${u.status}`);const L=u.headers.get("Content-Type");if(!p(a.accept)&&(!L||!L.includes(a.accept?a.accept:"text/html")))throw new Error(`Failed to load resource: expected ${a.accept||"text/html"} but was ${L}`);return u.text()}).then(u=>(E().then(()=>{a.dispatchEvent(new Event("load")),a.dispatchEvent(new Event("loadend"))}),u),u=>{throw E().then(()=>{a.dispatchEvent(new Event("error")),a.dispatchEvent(new Event("loadend"))}),u})}r(l,"fetchDataWithEvents");function p(a){return a&&!!a.split(",").find(u=>u.match(/^\s*\*\/\*/))}r(p,"isWildcard");class y extends HTMLElement{static get observedAttributes(){return["src","loading"]}get src(){const u=this.getAttribute("src");if(u){const L=this.ownerDocument.createElement("a");return L.href=u,L.href}else return""}set src(u){this.setAttribute("src",u)}get loading(){return this.getAttribute("loading")==="lazy"?"lazy":"eager"}set loading(u){this.setAttribute("loading",u)}get accept(){return this.getAttribute("accept")||""}set accept(u){this.setAttribute("accept",u)}get data(){return w(this)}attributeChangedCallback(u,L){u==="src"?this.isConnected&&this.loading==="eager"&&R(this):u==="loading"&&this.isConnected&&L!=="eager"&&this.loading==="eager"&&R(this)}constructor(){super();this.attachShadow({mode:"open"}).innerHTML=`
      <style> 
        :host {
          display: block;
        }
      </style>
      <slot></slot>`}connectedCallback(){this.src&&this.loading==="eager"&&R(this),this.loading==="lazy"&&T.observe(this)}request(){const u=this.src;if(!u)throw new Error("missing src");return new Request(u,{method:"GET",credentials:"same-origin",headers:{Accept:this.accept||"text/html"}})}load(){return w(this)}fetch(u){return fetch(u)}}r(y,"IncludeFragmentElement"),window.customElements.get("include-fragment")||(window.IncludeFragmentElement=y,window.customElements.define("include-fragment",y))}},Z=>{var N=r(f=>Z(Z.s=f),"__webpack_exec__");Z.O(0,[5724,93,90,6813,3682,6791],()=>N(46699));var d=Z.O()}]);})();

//# sourceMappingURL=diffs-45a607c4ca11.js.map