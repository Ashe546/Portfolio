"use strict";(()=>{var de=Object.defineProperty;var c=(x,E)=>de(x,"name",{value:E,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[7807],{79535:(x,E,f)=>{var g=f(64463),m=f(59753),p=f(65935),d=f(82036);(0,m.on)("click",".js-codespaces-update-skus-url",e=>{const t=e.currentTarget;if(!t)return;const n=t.getAttribute("data-refname");if(document.querySelector("form.js-prefetch-codespace-location")&&n){const a=document.querySelector("[data-codespace-skus-url]"),S=a?a.getAttribute("data-codespace-skus-url"):"";if(S){const L=new URL(S,window.location.origin);L.searchParams.set("ref_name",n),a&&a.setAttribute("data-codespace-skus-url",L.toString()),a&&a.setAttribute("data-branch-has-changed","true")}}}),(0,m.on)("remote-input-error","#js-codespaces-repository-select",()=>{const e=document.querySelector("#js-codespaces-unable-load-repositories-warning");e.hidden=!1}),(0,p.AC)(".js-new-codespace-form",async function(e,t){const n=e.closest("[data-replace-remote-form-target]"),o=n.querySelector(".js-new-codespace-submit-button");o instanceof HTMLInputElement&&(o.disabled=!0),e.classList.remove("is-error"),e.classList.add("is-loading");try{const a=await t.html();n.replaceWith(a.html)}catch{e.classList.remove("is-loading"),e.classList.add("is-error")}});let l=null;function i(e){l=e,e!==null&&document.querySelector(".js-codespace-loading-steps").setAttribute("data-current-state",l)}c(i,"advanceLoadingState"),(0,g.N7)(".js-codespace-loading-steps",{constructor:HTMLElement,add:e=>{const t=e.getAttribute("data-current-state");t&&i(t)}}),(0,g.N7)(".js-codespace-advance-state",{constructor:HTMLElement,add:e=>{const t=e.getAttribute("data-state");t&&i(t)}});let u=null;function _(e){(0,p.AC)(".js-fetch-cascade-token",async function(t,n){try{u=(await n.json()).json.token}catch{}}),(0,d.Bt)(e)}c(_,"fetchCascadeToken");function v(e,t,n){if(document.querySelector(e)){const a=Date.now(),L=setInterval(c(()=>{const J=Date.now()-a;if(u||J>=n){clearInterval(L),t(u||void 0);return}},"checkToken"),50)}}c(v,"waitForCascadeTokenWithTimeout"),(0,g.N7)(".js-auto-submit-form",{constructor:HTMLFormElement,initialize:d.Bt}),(0,g.N7)(".js-workbench-form-container",{constructor:HTMLElement,add:e=>{const t=e.querySelector(".js-cascade-token");b(e,t)}});function b(e,t){if(t.value!==""){const n=e.querySelector("form");(0,d.Bt)(n)}else{const n=document.querySelector(".js-fetch-cascade-token");_(n),v(".js-workbench-form-container",C,1e4)}}c(b,"resolveCascadeToken");function C(e){const t=document.querySelector(".js-workbench-form-container form");t&&e?(I(t,e),w(t,e),(0,d.Bt)(t)):i("failed")}c(C,"insertCodespaceTokenIntoShowAuthForm");function I(e,t){const n=e.querySelector(".js-cascade-token");n&&n.setAttribute("value",t)}c(I,"insertCodespaceTokenIntoCascadeField");function w(e,t){const n=e.querySelector(".js-partner-info");if(n){let o=n.getAttribute("value");o&&(o=o.replace("%CASCADE_TOKEN_PLACEHOLDER%",t),n.setAttribute("value",o))}}c(w,"insertCodespaceTokenIntoPartnerInfo");var r=f(90420),k=f(69567),s=f(51374),h=f(10900),y=f(83956);(0,m.on)("submit",".js-toggle-hidden-codespace-form",function(e){const t=e.currentTarget;A(t)}),(0,m.on)("click",".js-create-codespace-with-sku-button",async function(e){const t=e.currentTarget,n=t.closest("[data-target*='new-codespace.createCodespaceForm']")||t.closest("[data-target*='new-codespace.createCodespaceWithSkuSelectForm']");await(0,y.M)(n),n.classList.contains("js-open-in-vscode-form")?(A(n),H(n)):(n.submit(),P())});function A(e){const t=e.querySelectorAll(".js-toggle-hidden");for(const o of t)o.hidden=!o.hidden;const n=e.querySelectorAll(".js-toggle-disabled");for(const o of n)o.getAttribute("aria-disabled")?o.removeAttribute("aria-disabled"):o.setAttribute("aria-disabled","true")}c(A,"toggleFormSubmissionInFlight");function T(e){return e.closest("[data-replace-remote-form-target]")}c(T,"getFormTarget");async function P(){const e=document.querySelector(".js-codespaces-details-container");e&&(e.open=!1);const t=document.querySelector("new-codespace");if(t&&!t.getAttribute("data-no-submit-on-create"))try{const n=await fetch("/codespaces/new");if(n&&n.ok){const o=(0,h.r)(document,await n.text());t.replaceWith(o)}}catch{}}c(P,"createFormSubmitted"),(0,m.on)("submit",".js-create-codespaces-form-command",function(e){const t=e.currentTarget;t.classList.contains("js-open-in-vscode-form")||(P(),A(t))}),(0,m.on)("submit","form.js-codespaces-delete-form",async function(e){e.preventDefault();const t=e.currentTarget;try{const n=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{Accept:"text/fragment+html","X-Requested-With":"XMLHttpRequest"}});if(n.ok){const o=(0,h.r)(document,await n.text());T(t).replaceWith(o)}else if(n.status===401)t.submit();else throw new Error(`Unexpected response: ${n.statusText}`)}finally{A(t)}}),(0,m.on)("submit","form.js-open-in-vscode-form",async function(e){e.preventDefault();const t=e.currentTarget;await H(t)});async function D(e,t){const n=document.querySelector(`#${e}`),o=await(0,s.W)({content:n.content.cloneNode(!0),dialogClass:"project-dialog"});return t&&t.setAttribute("aria-expanded","true"),o.addEventListener("dialog:remove",function(){t&&A(t)},{once:!0}),o}c(D,"openDialog");async function H(e){const t=await fetch(e.action,{method:e.method,body:new FormData(e),headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(t.ok){const n=await t.json();n.codespace_url?(window.location.href=n.codespace_url,A(e),P(),N()):(e.closest("get-repo")||e.closest("new-codespace")?(e.setAttribute("data-src",n.loading_url),e.dispatchEvent(new CustomEvent("pollvscode"))):e.closest("prefetch-pane")&&(e.setAttribute("data-src",n.loading_url),e.dispatchEvent(new CustomEvent("prpollvscode"))),A(e))}else if(t.status===422){const n=await t.json();if(n.error_type==="concurrency_limit_error")await D("concurrency-error",e);else{const o=document.querySelector("template.js-flash-template"),a=n.error;o.after(new k.R(o,{className:"flash-error",message:a})),A(e)}}}c(H,"createCodespaceIntoVscode");async function N(){const e=document.querySelector(".js-codespaces-completable"),t=e&&e.getAttribute("data-src");if(!t)return;const n=await fetch(t,{method:"GET",headers:{Accept:"text/fragment+html","X-Requested-With":"XMLHttpRequest"}});if(n.ok){const o=(0,h.r)(document,await n.text());e.replaceWith(o)}else throw new Error(`Unexpected response: ${n.statusText}`)}c(N,"renderAllDone");var q=Object.defineProperty,z=Object.getOwnPropertyDescriptor,V=c((e,t,n,o)=>{for(var a=o>1?void 0:o?z(t,n):t,S=e.length-1,L;S>=0;S--)(L=e[S])&&(a=(o?L(t,n,a):L(a))||a);return o&&a&&q(t,n,a),a},"__decorateClass");let Z=c(class extends HTMLElement{async connectedCallback(){D("concurrency-error")}},"ConcurrencyLimitElement");Z=V([r.Ih],Z);var Y=Object.defineProperty,ee=Object.getOwnPropertyDescriptor,M=c((e,t,n,o)=>{for(var a=o>1?void 0:o?ee(t,n):t,S=e.length-1,L;S>=0;S--)(L=e[S])&&(a=(o?L(t,n,a):L(a))||a);return o&&a&&Y(t,n,a),a},"new_codespace_element_decorateClass");let O=c(class extends HTMLElement{async connectedCallback(){const e=this.formForLocations();if(e){const t=await(0,y.M)(e,!this.vscsLocationList);this.updatePickableLocations(t)}}formForLocations(){return this.advancedOptionsForm||this.createCodespaceForm}toggleLoadingVscode(){const e=this.loadingVscode.hidden,t=this.children;for(let n=0;n<t.length;n++)t[n].hidden=e;this.loadingVscode.hidden=!e}machineTypeSelected(e){const n=e.currentTarget.getAttribute("data-sku-name");this.skuNameInput&&n&&(this.skuNameInput.value=n),this.advancedOptionsForm&&this.advancedOptionsForm.requestSubmit()}pollForVscode(e){this.toggleLoadingVscode();const t=e.currentTarget.getAttribute("data-src");t&&this.vscodePoller.setAttribute("src",t)}async updatePickableLocations(e){const t=this.formForLocations();if(!e&&t){const a=t.getAttribute("data-codespace-locations-url");if(!a)return;e=await(0,y.W)(a)}const n=e.current,o=e.available;this.hideUnavailableLocations(o),this.preventSubmissionOfUnavailableLocation(o,n)}hideUnavailableLocations(e){if(!!this.vscsLocationList)if(this.advancedOptionsForm){const t=this.vscsLocationList.querySelectorAll(".select-menu-item");for(const n of t){const o=n.querySelector("input");if(o&&e.includes(o.getAttribute("data-location"))){n.removeAttribute("hidden");continue}o&&(o.removeAttribute("checked"),o.setAttribute("aria-checked","false")),n.setAttribute("hidden","hidden")}}else{const t=this.vscsLocationList.querySelectorAll(".SelectMenu-item");for(const n of t)e.includes(n.getAttribute("data-location"))?n.removeAttribute("hidden"):n.setAttribute("hidden","hidden")}}preventSubmissionOfUnavailableLocation(e,t){if(this.createCodespaceForm){const n=this.createCodespaceForm.querySelector('[name="codespace[location]"]');n&&!e.includes(n.value)&&(n.value=t)}if(this.advancedOptionsForm){const n=this.advancedOptionsForm.querySelector('[name="location"]');n&&!e.includes(n.value)&&(n.value=t),!this.advancedOptionsForm.querySelector('[name="location"]:checked')&&this.autoSelectLocation&&this.autoSelectLocation.hidden&&(this.selectedLocation&&this.selectedLocation.setAttribute("hidden","hidden"),this.needsSelectedLocation&&this.needsSelectedLocation.removeAttribute("hidden"))}}vscsTargetUrlUpdated(e){const t=e.currentTarget;this.vscsTargetUrl.value=t.value}},"NewCodespaceElement");M([r.fA],O.prototype,"form",2),M([r.fA],O.prototype,"createCodespaceForm",2),M([r.fA],O.prototype,"createCodespaceWithSkuSelectForm",2),M([r.fA],O.prototype,"vscsTargetUrl",2),M([r.fA],O.prototype,"vscsLocationList",2),M([r.fA],O.prototype,"loadingVscode",2),M([r.fA],O.prototype,"vscodePoller",2),M([r.fA],O.prototype,"advancedOptionsForm",2),M([r.fA],O.prototype,"locationResubmitParam",2),M([r.fA],O.prototype,"skuNameInput",2),M([r.fA],O.prototype,"selectedLocation",2),M([r.fA],O.prototype,"autoSelectLocation",2),M([r.fA],O.prototype,"needsSelectedLocation",2),O=M([r.Ih],O);var te=Object.defineProperty,ne=Object.getOwnPropertyDescriptor,U=c((e,t,n,o)=>{for(var a=o>1?void 0:o?ne(t,n):t,S=e.length-1,L;S>=0;S--)(L=e[S])&&(a=(o?L(t,n,a):L(a))||a);return o&&a&&te(t,n,a),a},"export_branch_element_decorateClass");let W=c(class extends HTMLElement{constructor(){super(...arguments);this.abortPoll=null}connectedCallback(){this.abortPoll=new AbortController,this.loadingIndicator.hidden||this.startPoll()}disconnectedCallback(){var e;(e=this.abortPoll)==null||e.abort()}async exportBranch(e){e.preventDefault(),this.form.hidden=!0,this.loadingIndicator.hidden=!1,(await fetch(this.form.action,{method:this.form.method,body:new FormData(this.form),headers:{Accept:"text/fragment+html","X-Requested-With":"XMLHttpRequest"}})).ok?this.startPoll():(this.form.hidden=!1,this.loadingIndicator.hidden=!0)}async startPoll(){const e=this.getAttribute("data-exported-codespace-url")||"",t=await this.poll(e);if(t)if(t.ok)this.loadingIndicator.hidden=!0,this.viewBranchLink.hidden=!1;else{const n=this.getAttribute("data-export-error-redirect-url")||"";window.location.href=n}}async poll(e,t=1e3){var n,o;if((n=this.abortPoll)==null?void 0:n.signal.aborted)return;const a=await fetch(e,{signal:(o=this.abortPoll)==null?void 0:o.signal});return a.status===202?(await new Promise(S=>setTimeout(S,t)),this.poll(e,t*1.5)):a}},"ExportBranchElement");U([r.fA],W.prototype,"form",2),U([r.fA],W.prototype,"loadingIndicator",2),U([r.fA],W.prototype,"viewBranchLink",2),W=U([r.Ih],W);var se=f(52660),ie=Object.defineProperty,oe=Object.getOwnPropertyDescriptor,j=c((e,t,n,o)=>{for(var a=o>1?void 0:o?oe(t,n):t,S=e.length-1,L;S>=0;S--)(L=e[S])&&(a=(o?L(t,n,a):L(a))||a);return o&&a&&ie(t,n,a),a},"options_popover_element_decorateClass");let B=c(class extends HTMLElement{reset(e){for(e.preventDefault(),this.dropdownDetails.hidden=!1,this.modalDetails.hidden=!0,this.exportDetails.hidden=!0,this.skuForm.hidden=!1;this.resultMessage.firstChild;)this.resultMessage.removeChild(this.resultMessage.firstChild);this.resultMessage.hidden=!0,this.errorMessage.hidden=!0}showSettingsModal(){this.dropdownDetails.hidden=!0,this.modalDetails.open=!0,this.modalDetails.hidden=!1}showExportModal(){this.dropdownDetails.hidden=!0,this.exportDetails.open=!0,this.exportDetails.hidden=!1,this.insertBranchExportComponent()}async insertBranchExportComponent(){const e=this.querySelector("[data-branch-export-url]");if(!e)return;const t=e.getAttribute("data-branch-export-url");if(!t)return;const n=await(0,se.a)(document,t);!n||(e.innerHTML="",e.appendChild(n))}},"OptionsPopoverElement");j([r.fA],B.prototype,"dropdownDetails",2),j([r.fA],B.prototype,"modalDetails",2),j([r.fA],B.prototype,"settingsModal",2),j([r.fA],B.prototype,"skuForm",2),j([r.fA],B.prototype,"resultMessage",2),j([r.fA],B.prototype,"errorMessage",2),j([r.fA],B.prototype,"exportDetails",2),B=j([r.Ih],B);var re=Object.defineProperty,ae=Object.getOwnPropertyDescriptor,F=c((e,t,n,o)=>{for(var a=o>1?void 0:o?ae(t,n):t,S=e.length-1,L;S>=0;S--)(L=e[S])&&(a=(o?L(t,n,a):L(a))||a);return o&&a&&re(t,n,a),a},"prefetch_pane_element_decorateClass");let R=c(class extends HTMLElement{constructor(){super(...arguments);this.prefetching=!1,this.remainingRetries=3}async connectedCallback(){this.openSkuButton&&this.skipSkuButton?(await this.prefetchLocationAndSkus(),this.hideSpinner(),this.hidden=!1):this.showOpenSkuButton()}async prefetchLocationAndSkus(){const e=this.getAttribute("data-branch-has-changed")==="true";if(this.prefetching&&!e)return;const t=document.querySelector("form.js-prefetch-codespace-location")||document.querySelector("form.js-open-in-vscode-form");if(t){this.prefetching=!0;const n=await(0,y.M)(t);if(n&&(this.currentLocation=n.current),!this.skuSelect)return;const o=this.getAttribute("data-codespace-skus-url"),a=this.currentLocation||(t.querySelector('[name="codespace[location]"]')||{}).value;if(a&&o){const S=await fetch(`${o}&location=${a}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/html_fragment"}});if(S.ok){this.setAttribute("data-branch-has-changed","false");const L=(0,h.r)(document,await S.text()),X=Array.from(L.querySelectorAll("input[name='codespace[sku_name]']")).filter(K=>!K.disabled),G=X.find(K=>K.checked);G&&this.defaultSkuPreview?(this.defaultSkuPreview.innerHTML=G.getAttribute("data-preview")||"",this.showSkipSkuButton()):X.length===1?(G||X[0].select(),this.showSkipSkuButton()):this.disableDropDownButton(),this.skuSelect.replaceWith(L),this.skuSelect.hidden=!1,this.skuError&&(this.skuError.hidden=!0)}else this.showOpenSkuButton(),this.remainingRetries-=1,this.remainingRetries>0&&(this.prefetching=!1),this.skuSelect.hidden=!0,this.skuError&&(this.skuError.hidden=!1)}}}showOpenSkuButton(){var e;this.shownButton===void 0&&this.openSkuButton&&(this.shownButton=this.openSkuButton,this.shownButton.hidden=!1,(e=this.skipSkuButton)==null||e.remove())}hideSpinner(){const e=document.querySelector("[data-target='codespacesCreateButtonSpinner']");e&&(e.hidden=!0)}disableDropDownButton(){this.dropdownButton&&(this.useAdvancedCreation(),this.dropdownButton.style.pointerEvents="none",this.dropdownButton.classList.add("color-fg-muted"))}showSkipSkuButton(){var e,t;if(this.shownButton===void 0&&this.skipSkuButton){this.shownButton=this.skipSkuButton,this.shownButton.hidden=!1;const n=(e=this.openSkuButton)==null?void 0:e.parentElement;n&&n instanceof HTMLDetailsElement&&(n.hidden=!0),(t=this.openSkuButton)==null||t.remove()}}toggleLoadingVscode(){if(this.loadingVscode){const e=this.loadingVscode.hidden,t=this.children;for(let n=0;n<t.length;n++)t[n].hidden=e;this.loadingVscode.hidden=!e}}pollForVscode(e){if(this.vscodePoller){this.toggleLoadingVscode();const t=e.currentTarget.getAttribute("data-src");t&&this.vscodePoller.setAttribute("src",t)}}useBasicCreation(){this.advancedOptionsLink&&(this.openSkuButton&&(this.openSkuButton.hidden=!1),this.skipSkuButton&&(this.skipSkuButton.hidden=!1),this.advancedOptionsLink&&(this.advancedOptionsLink.hidden=!0)),this.basicOptionsCheck&&this.basicOptionsCheck.classList.remove("v-hidden"),this.advancedOptionsCheck&&this.advancedOptionsCheck.classList.add("v-hidden"),this.selectionDetails.open=!1}useAdvancedCreation(){this.advancedOptionsLink&&(this.openSkuButton&&(this.openSkuButton.hidden=!0),this.skipSkuButton&&(this.skipSkuButton.hidden=!0),this.advancedOptionsLink.hidden=!1),this.basicOptionsCheck&&this.basicOptionsCheck.classList.add("v-hidden"),this.advancedOptionsCheck&&this.advancedOptionsCheck.classList.remove("v-hidden"),this.selectionDetails.open=!1}},"PrefetchPaneElement");F([r.fA],R.prototype,"skuSelect",2),F([r.fA],R.prototype,"skuError",2),F([r.fA],R.prototype,"selectionDetails",2),F([r.fA],R.prototype,"loadingVscode",2),F([r.fA],R.prototype,"vscodePoller",2),F([r.fA],R.prototype,"openSkuButton",2),F([r.fA],R.prototype,"skipSkuButton",2),F([r.fA],R.prototype,"defaultSkuPreview",2),F([r.fA],R.prototype,"dropdownButton",2),F([r.fA],R.prototype,"advancedOptionsLink",2),F([r.fA],R.prototype,"basicOptionsCheck",2),F([r.fA],R.prototype,"advancedOptionsCheck",2),R=F([r.Ih],R);var ce=Object.defineProperty,le=Object.getOwnPropertyDescriptor,Q=c((e,t,n,o)=>{for(var a=o>1?void 0:o?le(t,n):t,S=e.length-1,L;S>=0;S--)(L=e[S])&&(a=(o?L(t,n,a):L(a))||a);return o&&a&&ce(t,n,a),a},"vscode_forwarder_element_decorateClass");let $=c(class extends HTMLElement{async connectedCallback(){this.closeDetailsPopover();const e=this.getAttribute("data-codespace-url");e&&(window.location.href=e)}closeDetailsPopover(){const e=document.querySelector(".js-codespaces-details-container");e&&(e.open=!1)}},"VscodeForwarderElement");Q([r.fA],$.prototype,"vscodeLink",2),$=Q([r.Ih],$);var ue=f(9115),he=f(68906)},52134:(x,E,f)=>{f.d(E,{H:()=>p,v:()=>m});var g=f(59753);function m(){const d=document.getElementById("ajax-error-message");d&&(d.hidden=!1)}c(m,"showGlobalError");function p(){const d=document.getElementById("ajax-error-message");d&&(d.hidden=!0)}c(p,"hideGlobalError"),(0,g.on)("deprecatedAjaxError","[data-remote]",function(d){const l=d.detail,{error:i,text:u}=l;d.currentTarget===d.target&&(i==="abort"||i==="canceled"||(/<html/.test(u)?(m(),d.stopImmediatePropagation()):setTimeout(function(){d.defaultPrevented||m()},0)))}),(0,g.on)("deprecatedAjaxSend","[data-remote]",function(){p()}),(0,g.on)("click",".js-ajax-error-dismiss",function(){p()})},51374:(x,E,f)=>{f.d(E,{W:()=>m});var g=f(59753);async function m(p){const l=document.querySelector("#site-details-dialog").content.cloneNode(!0),i=l.querySelector("details"),u=i.querySelector("details-dialog"),_=i.querySelector(".js-details-dialog-spinner");p.detailsClass&&i.classList.add(...p.detailsClass.split(" ")),p.dialogClass&&u.classList.add(...p.dialogClass.split(" ")),p.label?u.setAttribute("aria-label",p.label):p.labelledBy&&u.setAttribute("aria-labelledby",p.labelledBy),document.body.append(l);const v=await p.content;return _.remove(),u.prepend(v),i.addEventListener("toggle",()=>{i.hasAttribute("open")||((0,g.f)(u,"dialog:remove"),i.remove())}),u}c(m,"dialog")},34782:(x,E,f)=>{f.d(E,{C:()=>m,x:()=>g});const g=function(){return document.readyState==="interactive"||document.readyState==="complete"?Promise.resolve():new Promise(p=>{document.addEventListener("DOMContentLoaded",()=>{p()})})}(),m=function(){return document.readyState==="complete"?Promise.resolve():new Promise(p=>{window.addEventListener("load",p)})}()},52660:(x,E,f)=>{f.d(E,{D:()=>d,a:()=>p});var g=f(2699),m=f(10900);async function p(l,i,u){const _=new Request(i,u);_.headers.append("X-Requested-With","XMLHttpRequest");const v=await self.fetch(_);if(v.status<200||v.status>=300)throw new Error(`HTTP ${v.status}${v.statusText||""}`);return(0,g.t)((0,g.P)(l),v),(0,m.r)(l,await v.text())}c(p,"fetchSafeDocumentFragment");function d(l,i,u=1e3){return c(async function _(v){const b=new Request(l,i);b.headers.append("X-Requested-With","XMLHttpRequest");const C=await self.fetch(b);if(C.status<200||C.status>=300)throw new Error(`HTTP ${C.status}${C.statusText||""}`);if(C.status===200)return C;if(C.status===202)return await new Promise(I=>setTimeout(I,v)),_(v*1.5);throw new Error(`Unexpected ${C.status} response status from poll endpoint`)},"poll")(u)}c(d,"fetchPoll")},82036:(x,E,f)=>{f.d(E,{Bt:()=>l,DN:()=>_,KL:()=>C,Se:()=>u,qC:()=>I,sw:()=>v});var g=f(59753),m=f(90137),p=f(52134);(0,g.on)("click",".js-remote-submit-button",async function(w){const k=w.currentTarget.form;w.preventDefault();let s;try{s=await fetch(k.action,{method:k.method,body:new FormData(k),headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})}catch{}s&&!s.ok&&(0,p.v)()});function d(w,r,k){return w.dispatchEvent(new CustomEvent(r,{bubbles:!0,cancelable:k}))}c(d,"fire");function l(w,r){r&&(i(w,r),(0,m.j)(r)),d(w,"submit",!0)&&w.submit()}c(l,"requestSubmit");function i(w,r){if(!(w instanceof HTMLFormElement))throw new TypeError("The specified element is not of type HTMLFormElement.");if(!(r instanceof HTMLElement))throw new TypeError("The specified element is not of type HTMLElement.");if(r.type!=="submit")throw new TypeError("The specified element is not a submit button.");if(!w||w!==r.form)throw new Error("The specified element is not owned by the form element.")}c(i,"checkButtonValidity");function u(w,r){if(typeof r=="boolean")if(w instanceof HTMLInputElement)w.checked=r;else throw new TypeError("only checkboxes can be set to boolean value");else{if(w.type==="checkbox")throw new TypeError("checkbox can't be set to string value");w.value=r}d(w,"change",!1)}c(u,"changeValue");function _(w,r){for(const k in r){const s=r[k],h=w.elements.namedItem(k);(h instanceof HTMLInputElement||h instanceof HTMLTextAreaElement)&&(h.value=s)}}c(_,"fillFormValues");function v(w){if(!(w instanceof HTMLElement))return!1;const r=w.nodeName.toLowerCase(),k=(w.getAttribute("type")||"").toLowerCase();return r==="select"||r==="textarea"||r==="input"&&k!=="submit"&&k!=="reset"||w.isContentEditable}c(v,"isFormField");function b(w){return new URLSearchParams(w)}c(b,"searchParamsFromFormData");function C(w,r){const k=new URLSearchParams(w.search),s=b(r);for(const[h,y]of s)k.append(h,y);return k.toString()}c(C,"combineGetFormSearchParams");function I(w){return b(new FormData(w)).toString()}c(I,"serialize")},2699:(x,E,f)=>{f.d(E,{P:()=>g,t:()=>p});function g(d){const l=[...d.querySelectorAll("meta[name=html-safe-nonce]")].map(i=>i.content);if(l.length<1)throw new Error("could not find html-safe-nonce on document");return l}c(g,"getDocumentHtmlSafeNonces");class m extends Error{constructor(l,i){super(`${l} for HTTP ${i.status}`);this.response=i}}c(m,"ResponseError");function p(d,l,i=!1){const u=l.headers.get("content-type")||"";if(!i&&!u.startsWith("text/html"))throw new m(`expected response with text/html, but was ${u}`,l);if(i&&!(u.startsWith("text/html")||u.startsWith("application/json")))throw new m(`expected response with text/html or application/json, but was ${u}`,l);const _=l.headers.get("x-html-safe");if(_){if(!d.includes(_))throw new m("response X-HTML-Safe nonce did not match",l)}else throw new m("missing X-HTML-Safe nonce",l)}c(p,"verifyResponseHtmlSafeNonce")},9115:(x,E,f)=>{var g=f(90420),m=Object.defineProperty,p=Object.getOwnPropertyDescriptor,d=c((i,u,_,v)=>{for(var b=v>1?void 0:v?p(u,_):u,C=i.length-1,I;C>=0;C--)(I=i[C])&&(b=(v?I(u,_,b):I(b))||b);return v&&b&&m(u,_,b),b},"__decorateClass");let l=c(class extends HTMLElement{connectedCallback(){this.control&&(this.storedInput=Array(this.control.children.length).fill("")),this.addEventListener("input",this.relayInput.bind(this)),this.addEventListener("keydown",this.relayKeydown.bind(this));const i=this.closest("details");i&&i.addEventListener("toggle",()=>{i.open&&this.source.focus()})}relayKeydown(i){if((this.isControlTab(i.target)||i.target===this.source)&&(i.key==="ArrowDown"||i.key==="Tab"))i.preventDefault(),i.stopPropagation(),this.routeCustomEvent(new CustomEvent("focus-list"));else if(i.key==="Escape"){const u=this.closest("details");u&&u.removeAttribute("open")}}isControlTab(i){return!i||!this.control?!1:Array.from(this.control.children).includes(i)}relayInput(i){if(!i.target)return;const _=i.target.value;this.routeCustomEvent(new CustomEvent("input-entered",{detail:_}))}routeCustomEvent(i){this.sinks[this.selectedIndex].dispatchEvent(i)}get selectedIndex(){if(!this.control)return 0;const i=this.control.querySelector('[aria-selected="true"]');return i?Array.from(this.control.children).indexOf(i):0}storeInput(){this.storedInput[this.selectedIndex]=this.source.value}updateInput(i){this.source.value=this.storedInput[this.selectedIndex];const u=i.detail.relatedTarget.getAttribute("data-filter-placeholder");this.source.placeholder=u,this.source.setAttribute("aria-label",u),this.notifySelected()}notifySelected(){const i=this.sinks[this.selectedIndex],u=new CustomEvent("tab-selected");i.dispatchEvent(u)}},"InputDemuxElement");d([g.fA],l.prototype,"source",2),d([g.GO],l.prototype,"sinks",2),d([g.fA],l.prototype,"control",2),l=d([g.Ih],l)},10900:(x,E,f)=>{f.d(E,{r:()=>g});function g(m,p){const d=m.createElement("template");return d.innerHTML=p,m.importNode(d.content,!0)}c(g,"parseHTML")},83956:(x,E,f)=>{f.d(E,{M:()=>m,W:()=>p});var g=f(59753);async function m(d,l=!0){const i=d.querySelectorAll('[name="codespace[location]"], [name="location"]');if(i.length===0)return;for(const b of i)if(b.value)return;const u=d.querySelector("button[type=submit]");u instanceof HTMLInputElement&&(u.disabled=!0);const _=d.getAttribute("data-codespace-locations-url");if(!_)return;const v=await p(_);if(l&&v)for(const b of i)b.value=v.current;return v}c(m,"prefetchCodespaceLocation");async function p(d){const l=await fetch(d,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!l.ok){const i=new Error,u=l.statusText?` ${l.statusText}`:"";throw i.message=`HTTP ${l.status}${u}`,i}return l.json()}c(p,"fetchLocationValues"),(0,g.on)("submit",".js-prefetch-codespace-location",async function(d){const l=d.currentTarget;d.preventDefault(),await m(l),l.submit()})},43452:(x,E,f)=>{f.d(E,{Z:()=>g});function g(m){var p,d;const l=(d=(p=m.head)==null?void 0:p.querySelector('meta[name="expected-hostname"]'))==null?void 0:d.content;if(!l)return!1;const i=l.replace(/\.$/,"").split(".").slice(-2).join("."),u=m.location.hostname.replace(/\.$/,"").split(".").slice(-2).join(".");return i!==u}c(g,"detectProxySite")},68906:(x,E,f)=>{var g=f(60785),m=f(83476);const{getItem:p,setItem:d,removeItem:l}=(0,g.Z)("localStorage",{throwQuotaErrorsOnSet:!0});var i=(s=>(s.Branch="branch",s.Tag="tag",s))(i||{});const u=c(class{constructor(s,h,y,A,T){this.knownItems=[],this.currentSearchResult=[],this.exactMatchFound=!1,this.isLoading=!0,this.fetchInProgress=!1,this.fetchFailed=!1,this.refType=s,this.selector=h,this.refEndpoint=y,this.cacheKey=A,this.nameWithOwner=T}render(){this.selector.render()}async fetchData(){try{if(!this.isLoading||this.fetchInProgress)return;if(!this.bootstrapFromLocalStorage()){this.fetchInProgress=!0,this.fetchFailed=!1;const s=await fetch(`${this.refEndpoint}?type=${this.refType}`,{headers:{Accept:"application/json"}});await this.processResponse(s)}this.isLoading=!1,this.fetchInProgress=!1,this.render()}catch{this.fetchInProgress=!1,this.fetchFailed=!0}}async processResponse(s){if(this.emitStats(s),!s.ok){this.fetchFailed=!0;return}const h=s.clone(),y=await s.json();this.knownItems=y.refs,this.cacheKey=y.cacheKey,this.flushToLocalStorage(await h.text())}emitStats(s){if(!s.ok){(0,m.b)({incrementKey:"REF_SELECTOR_BOOT_FAILED"},!0);return}switch(s.status){case 200:{(0,m.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_UNCACHED_HTTP"});break}case 304:{(0,m.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_HTTP_CACHE"});break}default:(0,m.b)({incrementKey:"REF_SELECTOR_UNEXPECTED_RESPONSE"})}}search(s){if(s===""){this.currentSearchResult=this.knownItems;return}const h=[],y=[];this.exactMatchFound=!1;let A;for(const T of this.knownItems)if(A=T.indexOf(s),!(A<0)){if(A===0){s===T?(y.unshift(T),this.exactMatchFound=!0):y.push(T);continue}h.push(T)}this.currentSearchResult=[...y,...h]}bootstrapFromLocalStorage(){const s=p(this.localStorageKey);if(!s)return!1;const h=JSON.parse(s);return h.cacheKey!==this.cacheKey||!("refs"in h)?(l(this.localStorageKey),!1):(this.knownItems=h.refs,this.isLoading=!1,(0,m.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_LOCALSTORAGE"}),!0)}async flushToLocalStorage(s){try{d(this.localStorageKey,s)}catch(h){if(h.message.toLowerCase().includes("quota")){this.clearSiblingLocalStorage(),(0,m.b)({incrementKey:"REF_SELECTOR_LOCALSTORAGE_OVERFLOWED"});try{d(this.localStorageKey,s)}catch(y){y.message.toLowerCase().includes("quota")&&(0,m.b)({incrementKey:"REF_SELECTOR_LOCALSTORAGE_GAVE_UP"})}}else throw h}}clearSiblingLocalStorage(){for(const s of Object.keys(localStorage))s.startsWith(u.LocalStoragePrefix)&&l(s)}get localStorageKey(){return`${u.LocalStoragePrefix}:${this.nameWithOwner}:${this.refType}`}},"_SearchIndex");let _=u;_.LocalStoragePrefix="ref-selector";var v=f(69567),b=f(90420),C=f(17945),I=Object.defineProperty,w=Object.getOwnPropertyDescriptor,r=c((s,h,y,A)=>{for(var T=A>1?void 0:A?w(h,y):h,P=s.length-1,D;P>=0;P--)(D=s[P])&&(T=(A?D(h,y,T):D(T))||T);return A&&T&&I(h,y,T),T},"__decorateClass");let k=c(class extends HTMLElement{constructor(){super(...arguments);this.isCurrentVisible=!1,this.currentSelectionIndex=null,this.handleWindowResize=()=>{if(!this.virtualizedList)return;const s=this.isMobileViewport,h=this.windowHeight;this.updateViewportSize();const y=s!==this.isMobileViewport,A=h!==this.windowHeight;if(y){this.virtualizedList.destroy(),this.setupVirtualizedList();return}!this.isMobileViewport||!A||(this.listContainer.style.maxHeight=`${this.listHeight}px`,this.virtualizedList.resize(this.listHeight))},this.windowResized=()=>{this.resizeAnimationRequest&&cancelAnimationFrame(this.resizeAnimationRequest),this.resizeAnimationRequest=requestAnimationFrame(this.handleWindowResize)}}connectedCallback(){window.addEventListener("resize",this.windowResized),this.refType=this.getRequiredAttr("type")==="branch"?i.Branch:i.Tag;const s=this.getAttribute("current-committish");this.currentCommittish=s?atob(s):null,this.input=this.hasAttribute("initial-filter")&&this.currentCommittish||"",this.defaultBranch=atob(this.getRequiredAttr("default-branch")),this.nameWithOwner=atob(this.getRequiredAttr("name-with-owner")),this.canCreate=this.hasAttribute("can-create"),this.prefetchOnMouseover=this.hasAttribute("prefetch-on-mouseover");const h=this.getRequiredAttr("query-endpoint"),y=this.getRequiredAttr("cache-key");this.index=new _(this.refType,this,h,y,this.nameWithOwner),this.updateViewportSize(),this.setupFetchListeners()}disconnectedCallback(){this.resizeAnimationRequest&&cancelAnimationFrame(this.resizeAnimationRequest),window.removeEventListener("resize",this.windowResized)}updateViewportSize(){this.isMobileViewport=window.innerWidth<544,this.windowHeight=window.innerHeight}inputEntered(s){this.input=s.detail,this.render()}tabSelected(){this.index.fetchData()}renderTemplate(s,h){return new v.R(s,h,v.XK)}renderRow(s){const h=this.index.currentSearchResult[s];if(!h&&s>=this.listLength)return document.createElement("span");if(this.index.fetchFailed)return this.renderTemplate(this.fetchFailedTemplate,{index:s,refName:this.input});if(!h){const D=this.input===this.currentCommittish;return this.isCurrentVisible||(this.isCurrentVisible=D),this.renderTemplate(this.noMatchTemplate,{index:s,isCurrent:D,refName:this.input})}const y=this.input.length>0,A=y?"is-filtering":"",T=h===this.currentCommittish;this.isCurrentVisible||(this.isCurrentVisible=T);const P=this.renderTemplate(this.itemTemplate,{refName:h,index:s,isFilteringClass:A,urlEncodedRefName:this.urlEncodeRef(h),isCurrent:T,isNotDefault:h!==this.defaultBranch});if(y){const D=P.querySelector("span");D.textContent="";const H=h.split(this.input),N=H.length-1;for(let q=0;q<H.length;q++){const z=H[q];if(D.appendChild(document.createTextNode(z)),q<N){const V=document.createElement("b");V.textContent=this.input,D.appendChild(V)}}}return P}urlEncodeRef(s){return encodeURIComponent(s).replaceAll("%2F","/").replaceAll("%3A",":").replaceAll("%2B","+")}render(){if(this.currentSelectionIndex=null,!this.index.isLoading){if(!this.virtualizedList){this.index.search(this.input),this.setupVirtualizedList();return}this.listContainer.scrollTop=0,this.index.search(this.input),this.virtualizedList.setRowCount(this.listLength)}}get listHeight(){return this.isMobileViewport?this.windowHeight*.3:330}get listLength(){const s=this.index.currentSearchResult.length;return this.showCreateRow?s+1:s||1}get showCreateRow(){return!this.index.fetchFailed&&!this.index.exactMatchFound&&this.input!==""&&this.canCreate}getRequiredAttr(s,h=this){const y=h.getAttribute(s);if(!y)throw new Error(`Missing attribute for ${h}: ${s}`);return y}setupFetchListeners(){const s=this.closest("details");let h=!1;const y=c(()=>{h||(this.index.fetchData(),h=!0)},"fetch");if(!s||s.open){y();return}this.prefetchOnMouseover&&s.addEventListener("mouseover",y,{once:!0}),this.addEventListener("keydown",this.keydown),this.addEventListener("change",this.updateCurrent);const A=s.querySelector("input[data-ref-filter]");A&&(A.addEventListener("input",()=>{this.input=A.value,this.render()}),A.addEventListener("keydown",T=>{if(T.key==="ArrowDown"||T.key==="Tab")T.preventDefault(),T.stopPropagation(),this.focusFirstListMember();else if(T.key==="Enter"){let P=this.index.currentSearchResult.indexOf(this.input);if(P===-1)if(this.showCreateRow)P=this.listLength-1;else return;s.querySelector(`[data-index="${P}"]`).click(),T.preventDefault()}}))}focusFirstListMember(){!this.virtualizedList||(this.currentSelectionIndex=0,this.focusItemAtIndex(this.currentSelectionIndex))}updateCurrent(s){s.target instanceof HTMLInputElement&&s.target.checked&&s.target.value&&(this.currentCommittish=s.target.value)}keydown(s){if(this.currentSelectionIndex!==null){if(s.key==="Enter"){const h=document.activeElement;if(!h)return;h.click(),s.preventDefault();return}if(!(s.key==="Tab"&&s.shiftKey)&&s.key!=="Escape")switch(s.preventDefault(),s.stopPropagation(),s.key){case"ArrowUp":{this.currentSelectionIndex--,this.currentSelectionIndex<0&&(this.currentSelectionIndex=this.listLength-1),this.focusItemAtIndex(this.currentSelectionIndex);break}case"Home":{this.currentSelectionIndex=0,this.focusItemAtIndex(this.currentSelectionIndex);break}case"End":{this.currentSelectionIndex=this.listLength-1,this.focusItemAtIndex(this.currentSelectionIndex);break}case"Tab":case"ArrowDown":{this.currentSelectionIndex++,this.currentSelectionIndex>this.listLength-1&&(this.currentSelectionIndex=0),this.focusItemAtIndex(this.currentSelectionIndex);break}}}}focusItemAtIndex(s){this.virtualizedList.scrollToIndex(s,"center"),setTimeout(()=>{const h=this.listContainer.querySelector(`[data-index="${s}"]`);h&&h.focus()},20)}setupVirtualizedList(){this.listContainer.innerHTML="",this.listContainer.style.maxHeight=`${this.listHeight}px`,this.virtualizedList=new C.Z(this.listContainer,{height:this.listHeight,rowCount:this.listLength,renderRow:this.renderRow.bind(this),rowHeight:s=>{const h=this.isMobileViewport?54:33;return this.showCreateRow&&s===this.listLength-1?51:h},onRowsRendered:()=>{var s;this.hiddenCurrentElement&&(this.listContainer.removeChild(this.hiddenCurrentElement),delete this.hiddenCurrentElement),this.isCurrentVisible?this.isCurrentVisible=!1:this.hiddenCurrentItemTemplate&&(this.hiddenCurrentElement=document.createElement("div"),(s=this.hiddenCurrentElement)==null||s.appendChild(this.renderTemplate(this.hiddenCurrentItemTemplate,{refName:this.currentCommittish})),this.listContainer.appendChild(this.hiddenCurrentElement))},initialIndex:0,overscanCount:6}),this.virtualizedList.resize.bind(this.virtualizedList)}},"RefSelectorElement");r([b.fA],k.prototype,"listContainer",2),r([b.fA],k.prototype,"itemTemplate",2),r([b.fA],k.prototype,"noMatchTemplate",2),r([b.fA],k.prototype,"fetchFailedTemplate",2),r([b.fA],k.prototype,"hiddenCurrentItemTemplate",2),k=r([b.Ih],k)},90137:(x,E,f)=>{f.d(E,{j:()=>g,u:()=>m});function g(p){const d=p.closest("form");if(!(d instanceof HTMLFormElement))return;let l=m(d);if(p.name){const i=p.matches("input[type=submit]")?"Submit":"",u=p.value||i;l||(l=document.createElement("input"),l.type="hidden",l.classList.add("is-submit-button-value"),d.prepend(l)),l.name=p.name,l.value=u}else l&&l.remove()}c(g,"persistSubmitButtonValue");function m(p){const d=p.querySelector("input.is-submit-button-value");return d instanceof HTMLInputElement?d:null}c(m,"findPersistedSubmitButtonValue")},60785:(x,E,f)=>{f.d(E,{Z:()=>m});class g{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}}c(g,"NoOpStorage");function m(p,d={throwQuotaErrorsOnSet:!1},l=window){let i;try{i=l[p]}catch{i=new g}const{throwQuotaErrorsOnSet:u}=d;function _(C){try{return i.getItem(C)}catch{return null}}c(_,"getItem");function v(C,I){try{i.setItem(C,I)}catch(w){if(u&&w.message.toLowerCase().includes("quota"))throw w}}c(v,"setItem");function b(C){try{i.removeItem(C)}catch{}}return c(b,"removeItem"),{getItem:_,setItem:v,removeItem:b}}c(m,"safeStorage")},83476:(x,E,f)=>{f.d(E,{b:()=>d});var g=f(43452),m=f(34782);let p=[];function d(v,b=!1){v.timestamp===void 0&&(v.timestamp=new Date().getTime()),v.loggedIn=_(),v.bundler="webpack",p.push(v),b?u():i()}c(d,"sendStats");let l=null;async function i(){await m.C,l==null&&(l=window.requestIdleCallback(u))}c(i,"scheduleSendStats");function u(){var v,b;if(l=null,!p.length||(0,g.Z)(document))return;const C=(b=(v=document.head)==null?void 0:v.querySelector('meta[name="browser-stats-url"]'))==null?void 0:b.content;if(!C)return;const I=JSON.stringify({stats:p});try{navigator.sendBeacon&&navigator.sendBeacon(C,I)}catch{}p=[]}c(u,"flushStats");function _(){var v,b;return!!((b=(v=document.head)==null?void 0:v.querySelector('meta[name="user-login"]'))==null?void 0:b.content)}c(_,"isLoggedIn"),document.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u)}},x=>{var E=c(g=>x(x.s=g),"__webpack_exec__");x.O(0,[5724,90,3878],()=>E(79535));var f=x.O()}]);})();

//# sourceMappingURL=codespaces-8cc7ce827a4f.js.map